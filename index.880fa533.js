var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);var a=o("7me8F");let i,r,s,c,l=9,d=1;function u(e,t,n){s=n,d=e,r=t,i=function(e,t){const n=[];let o,a;const i=Math.floor(l/2);e<1?e=1:e>t&&(e=t);t<=l?(o=1,a=t):e<=i?(o=1,a=l):e+i>=t?(o=t-2*i,a=t):(o=e-i,a=e+i);for(let e=o;e<=a;e+=1)n.push(e);l>=9&&(n.splice(0,1,1),n.splice(n.length-1,1,t),e-1>i&&t>l&&n.splice(1,1," ..."),e+1+i<t&&t>l&&n.splice(n.length-2,1,"... "));return n}(d,r),function(e,t){let n=e.reduce(((e,t)=>e+`<button type="button" ${t===d?'class="pagination-button pagination-button-current"':'class="pagination-button"'}>${t}</button>`),"");r>l&&(1!==d&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),d!==r&&(n+='<button type="button" class="pagination-button">&gt;</button>'));t.innerHTML="",t.insertAdjacentHTML("beforeend",n)}(i,s)}function f(e){const t=e.target.textContent;return isNaN(Number(t))||(c=Number(t)),">"===t&&(c=d===r?r:d+1),"<"===t&&(c=1===d?1:d-1)," ..."===t&&(c=d-(l-4)),"... "===t&&(c=d+(l-4)),d=c,d}window.addEventListener("resize",(()=>{const e=window.matchMedia("(min-width: 768px)").matches;l=e?9:5,u(d,r,s)}));var g=o("fA0uA"),m=o("7TcCz"),h=o("04jNI"),p=o("b5rV1");p=o("b5rV1");const w=document.querySelector(".dropdown"),y=document.querySelector(".items");w.addEventListener("click",(function(e){e.preventDefault(),w.classList.toggle("active")})),function(){const e=p.genresFilm.getLocalStorage();e.unshift({id:"all",name:"ALL"});const t=e.map(((e,t)=>`<a href="#" style="--i:${t+1}" id="${e.id}">\n           <span></span>${e.name}\n         </a>`)).join("");y.insertAdjacentHTML("beforeend",t)}();m=o("7TcCz");const b=new(0,p.LocalStorage)("currentFilmsList"),L=new(0,h.default)({selector:".loading"}),v=document.querySelector(".home-gallery"),S=document.querySelector(".pagination"),q=document.querySelector("#input-toggle"),F=document.querySelector(".search-form"),T=document.querySelector(".error-text");let x,N,C;S.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;L.show();const t=f(e);if(t===A)return;A=t,await V(),L.hide()})),q.addEventListener("change",(async function(e){D=e.currentTarget.checked,_=!1,z=!1,A=1,await V()})),y.addEventListener("click",(async function(e){e.preventDefault(),_=!0,z=!1,E=e.target.id,A=1,await V()})),F.addEventListener("submit",(async function(e){if(e.preventDefault(),M=e.target.elements.searchQuery.value.trim(),F.reset(),!M)return void $();z=!0,_=!1,j=A,A=1,await V()}));let E,M="",j=1,A=1,k=1,D=!1,_=!1,z=!1;async function V(){L.show(),await async function(){if(z){const e=await(0,a.fetchQuery)(M,A);if(!e.results.length)return A=j,L.hide(),void $();x=e}else x=_?await(0,a.fetchMoivesByGenre)(E,A):D?await(0,a.fetchPopularDay)(A):await(0,a.fetchPopular)(A)}(),k=_?300:x.total_pages,C=x.results,b.setLocalStorage(C),(0,g.markupTrending)(C,v),u(A,k,S),L.hide(),window.scrollTo(0,0)}function $(){T.style.opacity="1",setTimeout((()=>{T.style.opacity="0"}),2e3)}T.style.opacity="0",async function(){L.show(),x=await(0,a.fetchGenre)(),N=x.genres,p.genresFilm.setLocalStorage(N),await V(),(0,m.default)(),window.scrollTo(0,0),L.hide()}(),o("2ix2C"),o("b5rV1");p=o("b5rV1");var B=o("iQIUW");g=o("fA0uA");const I={width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3};v.addEventListener("click",(function(e){const t=e.target.closest(".movies-images__item");if(!t)return;Q=Number(t.dataset.id),G=b.getLocalStorage();const n=G.find((e=>e.id===Q)),o=(0,g.getGenreByIdList)(n.genre_ids);O=p.watchedFilms.getLocalStorage(),R=!!O.length&&O.find((e=>e.id==Q)),U=p.queueFilms.getLocalStorage(),P=!!U.length&&U.find((e=>e.id==Q)),(0,g.createMarkupModalWindow)(n,o,R,P)}));document.querySelector(".js-filmInfoModal").addEventListener("click",(function(e){const t=e.target;H=G.filter((e=>e.id==Q)),(t.classList.contains("js-add-to-watched")||t.classList.contains("js-add-to-queue"))&&(t.classList.contains("js-add-to-watched")?R?(p.watchedFilms.deleteFilmFromStorage(H[0]),e.target.textContent="add to watched",B.Notify.success("The movie is deleted from to my library",I),R=!1):(p.watchedFilms.addFilmtoStorage(...H),e.target.textContent="remove from watched",B.Notify.success("The movie has been added to my library",I),R=!0):t.classList.contains("js-add-to-queue")&&(P?(p.queueFilms.deleteFilmFromStorage(H[0]),e.target.textContent="add to queue",B.Notify.success("The movie is deleted from queue",I),P=!1):(p.queueFilms.addFilmtoStorage(...H),e.target.textContent="remove from queue",B.Notify.success("The movie has been added to queue",I),P=!0)))}));let O,U,G,H,Q,R=!1,P=!1;!function(){p.watchedFilms.getLocalStorage()||p.watchedFilms.setLocalStorage();p.queueFilms.getLocalStorage()||p.queueFilms.setLocalStorage()}(),o("fA0uA"),o("6gB84"),o("7TcCz"),o("37v9V"),o("6lsda");
//# sourceMappingURL=index.880fa533.js.map
