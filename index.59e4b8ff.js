async function t(){try{const t=fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e55542ecb6aab3d889d16953eac82937");return(await t).json()}catch(t){return console.log("error :>> ",t)}}async function e(t){try{const e=fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=e55542ecb6aab3d889d16953eac82937&page=${t}`);return(await e).json()}catch(t){return console.log("error :>> ",t)}}async function n(t){try{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=e55542ecb6aab3d889d16953eac82937&page=${t}`);return await e.json()}catch(t){return console.log("error :>> ",t)}}async function o(t){try{const e=fetch(`https://api.themoviedb.org/3/movie/${t}/videos?api_key=e55542ecb6aab3d889d16953eac82937&language=en-US`);return(await e).json()}catch(t){}return console.log("error :>> ",error)}let s,i,a,c,r=9,l=1;function d(t,e,n){a=n,l=t,i=e,s=function(t,e){const n=[];let o,s;const i=Math.floor(r/2);t<1?t=1:t>e&&(t=e);e<=r?(o=1,s=e):t<=i?(o=1,s=r):t+i>=e?(o=e-2*i,s=e):(o=t-i,s=t+i);for(let t=o;t<=s;t+=1)n.push(t);r>=9&&(n.splice(0,1,1),n.splice(n.length-1,1,e),t-1>i&&e>r&&n.splice(1,1," ..."),t+1+i<e&&e>r&&n.splice(n.length-2,1,"... "));return n}(l,i),function(t,e){let n=t.reduce(((t,e)=>t+`<button type="button" ${e===l?'class="pagination-button pagination-button-current"':'class="pagination-button"'}>${e}</button>`),"");i>r&&(1!==l&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),l!==i&&(n+='<button type="button" class="pagination-button">&gt;</button>'));e.innerHTML="",e.insertAdjacentHTML("beforeend",n)}(s,a)}function u(t){if("BUTTON"!==t.target.nodeName)return;const e=t.target.textContent;return isNaN(Number(e))||(c=Number(e)),">"===e&&(c=l===i?i:l+1),"<"===e&&(c=1===l?1:l-1)," ..."===e&&(c=l-(r-4)),"... "===e&&(c=l+(r-4)),l=c,l}window.addEventListener("resize",(()=>{const t=window.matchMedia("(min-width: 768px)").matches;r=t?9:5,d(l,i,a)}));const m={scrollPosition:null,disabledScroll(){m.scrollPosition=window.scrollY,document.body.style.cssText=`\n        overflow: hidden;\n        top: -${m.scrollPosition}px;\n        left: 0;\n        height: 100vh;\n        width: 100vw;\n        padding-right: ${window.innerWidth-document.body.offsetWidth}px;\n        `},enabledScroll(){document.body.style.cssText="",window.scroll({top:m.scrollPosition})}};var g=m;function h(){const t=document.querySelectorAll(".js-modal-triger"),e=document.querySelector(".backdrop"),n=document.querySelectorAll(".modal"),o=document.querySelectorAll(".modal-close-btn");function s(t){t.preventDefault();const n=t.currentTarget.dataset.modal;document.querySelector("."+n).classList.add("active"),e.classList.add("active"),g.disabledScroll()}function i(t){t.preventDefault(),this.closest(".modal").classList.remove("active"),e.classList.remove("active"),g.enabledScroll()}document.addEventListener("keydown",(function(t){if("Escape"!==t.code)return;Array.from(n).forEach((t=>{t.classList.remove("active"),g.enabledScroll()})),e.classList.remove("active"),g.enabledScroll()})),e.addEventListener("click",(function(t){Array.from(n).forEach((t=>{t.classList.remove("active"),g.enabledScroll()})),e.classList.remove("active"),g.enabledScroll()})),Array.from(t).forEach((t=>{t.addEventListener("click",s)})),Array.from(o).forEach((t=>{t.addEventListener("click",i)}))}const f={genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]};function b(t,e){console.log(t);const n=t.map((({id:t,title:e,genre_ids:n,original_title:o,release_date:s,poster_path:i})=>`<li class="movies-images__item" data-id=${t}>\n            <img class="movie-image" src="${function(t){let e=`https://image.tmdb.org/t/p/w500${t}`;null===t&&(e="https://icon-library.com/images/no-image-icon/no-image-icon-0.jpg");return e}(i)}" \n            alt="Movie ${e||o}" />\n        <div class="box-description">\n            <div class="title_wrraper"><h2 class="box-description__title">${e||o}</h2></div>\n            <p class="box-description__text">\n                <span class="box-description__span">${function(t,e=f.genres){let n=[];for(const o of t){const t=e.find((t=>t.id===o));n.push(t.name)}n.length>3&&(n=n.slice(0,2),n.push("Other"));return n.join(", ")}(n)||"There are no genres"}</span>${s.slice(0,4)||"No year"}\n            </p>\n        </div>\n    </li>`)).join("");e.innerHTML=n}h();function v(t,e=f.genres){let n=[];for(const o of t){const t=e.find((t=>t.id===o));n.push(t.name)}return n.join(", ")}const p=document.querySelector(".modal-film-info");function y(t,e){const{id:n,title:o,poster_path:s,vote_average:i,vote_count:a,popularity:c,original_title:r,overview:l}=t,d=document.querySelector(".modal-film-info"),u=`<div class="poster-block">\n        <img class="poster" src="https://image.tmdb.org/t/p/w500/${s}" />\n           <button type="button" data-modal-id=${n}  class="youtube__btn js__youtube__btn">\n        <span class="background-image"></span>\n           <i class="fa fa-youtube-play" aria-hidden="true"></i>\n           </button>\n      </div>\n      <div class="film-information" id='${n}'>\n        <h2 class="film-information-title">${o}</h2>\n        <table class="rating-table">\n          <tr>\n            <td class="table-subtitle">Vote / Votes</td>\n            <td class="table-inf"><span class="rating">${i.toFixed(1)}</span> / ${a}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Popularity</td>\n            <td class="table-inf">${c.toFixed(1)}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Original Title</td>\n            <td class="table-inf">${r}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Genre</td>\n            <td class="table-inf">${e}</td>\n          </tr>\n        </table>\n        <p class="about">About</p>\n        <p class="about-film">\n          ${l}\n        </p>\n        <div class="buttons-add">\n          <button type="button" class="btn-add js-add-to-watched">add to Watched</button>\n          <button type="button" class="btn-add js-add-to-queue">add to queue</button>\n        </div>\n      </div>`;d.innerHTML=u}const L=new class{getRefs(t){const e={};return e.spinner=document.querySelector(t),e}show(){this.refs.spinner.classList.remove("is-hidden")}hide(){this.refs.spinner.classList.add("is-hidden")}constructor({selector:t,hidden:e=!0}){this.refs=this.getRefs(t),e&&this.hide()}}({selector:".loading"});let _,w;console.log("ðŸš€ ~ loadSpinner",L);let S=1,k=1;const E=document.querySelector(".pagination");E.addEventListener("click",(async function(t){L.show();const e=u(t);if(e===S)return;S=e,await x(),L.hide()}));const q=document.querySelector(".home-gallery");async function x(){L.show();const t=await e(S);w=t.results,k=t.total_pages,console.log("locStorageFilms :>> ",w),console.log("totalPages :>> ",k),b(w,q),d(S,k,E),L.hide()}!async function(){L.show();const e=await t();_=e.genres,console.log("locStorageGenres :>> ",_),await x(),L.hide()}(),q.addEventListener("click",(function(t){const e=t.target.closest(".movies-images__item");if(!e)return;const n=Number(e.dataset.id),o=w.find((t=>t.id===n)),s=v(o.genre_ids);h(),y(o,s)}));const A=" popularByWeek",$=" popularByDay",T="watched",j="queue",N="genres";class M{setLocalStorage(t=[]){this.value=t,localStorage.setItem(this.key,JSON.stringify(this.value))}getLocalStorage(){try{const t=localStorage.getItem(this.key);if(t)return JSON.parse(t)}catch(t){console.log("Error",t)}}addFilmtoStorage(t){const e=this.getLocalStorage(this.key);e.push(t),this.value=e,this.setLocalStorage(this.value)}deleteFilmFromStorage(t){const e=this.getLocalStorage(this.key);if(e.length)if(e.find((e=>e.id===t.id))){console.log("I`m delete film from the collection!");const n=e.findIndex((e=>e.id===t.id));e.splice(n,1),this.value=currentFilms,this.setLocalStorage(this.value)}else console.log("Cannot find film in collection")}constructor(t,e=[]){this.key=t,this.value=e}}const C=new M($),F=new M(A),D=new M(T),O=new M(j);new M(N);({el:document.querySelector(".btn-up"),scrolling:!1,show(){this.el.classList.contains("btn-up_hide")&&!this.el.classList.contains("btn-up_hiding")&&(this.el.classList.remove("btn-up_hide"),this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.remove("btn-up_hiding")}),300))},hide(){this.el.classList.contains("btn-up_hide")||this.el.classList.contains("btn-up_hiding")||(this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.add("btn-up_hide"),this.el.classList.remove("btn-up_hiding")}),300))},addEventListener(){window.addEventListener("scroll",(()=>{const t=window.scrollY||document.documentElement.scrollTop;this.scrolling&&t>0||(this.scrolling=!1,t>400?this.show():this.hide())})),document.querySelector(".btn-up").onclick=()=>{this.scrolling=!0,this.hide(),window.scrollTo({top:0,left:0,behavior:"smooth"})}}}).addEventListener();const P=document.querySelector(".footer__link"),I=document.querySelector(".box"),H=(document.querySelector(".teams_desk"),document.querySelector(".fon")),W=document.querySelector("#p1"),R=document.querySelector("#p2"),U=document.querySelector("#p3"),V=document.querySelector("#p4"),B=document.querySelector("#p5"),G=document.querySelector("#p6"),J=document.querySelector("#p7"),Y=document.querySelector("#p8"),z=document.querySelector("#p9");function K(){W.classList.remove("teams_desk_active"),R.classList.remove("teams_desk_active"),U.classList.remove("teams_desk_active"),V.classList.remove("teams_desk_active"),B.classList.remove("teams_desk_active"),G.classList.remove("teams_desk_active"),J.classList.remove("teams_desk_active"),Y.classList.remove("teams_desk_active"),z.classList.remove("teams_desk_active")}P.addEventListener("click",(function(t){t.preventDefault(),I.classList.toggle("box_active"),H.classList.add("fon_active")})),I.addEventListener("click",(function(t){t.preventDefault(),K(),function(t){"t1"===t.target.getAttribute("id")&&W.classList.add("teams_desk_active");"t2"===t.target.getAttribute("id")&&R.classList.add("teams_desk_active");"t3"===t.target.getAttribute("id")&&U.classList.add("teams_desk_active");"t4"===t.target.getAttribute("id")&&V.classList.add("teams_desk_active");"t5"===t.target.getAttribute("id")&&B.classList.add("teams_desk_active");"t6"===t.target.getAttribute("id")&&G.classList.add("teams_desk_active");"t7"===t.target.getAttribute("id")&&J.classList.add("teams_desk_active");"t8"===t.target.getAttribute("id")&&Y.classList.add("teams_desk_active");"t9"===t.target.getAttribute("id")&&z.classList.add("teams_desk_active")}(t)})),H.addEventListener("click",(function(t){H.classList.toggle("fon_active"),I.classList.toggle("box_active"),K()}));const Q=document.querySelector("#input-toggle");const X=document.querySelector(".home-gallery");Q.addEventListener("change",(function(){if(Q.checked){n(1).then((t=>{const e=t.results;C.setLocalStorage(e),b(e,X)}))}else{e(1).then((t=>{const e=t.results;F.setLocalStorage(e),b(e,X)}))}}));const Z=document.querySelector(".js-filmInfoModal"),tt=document.querySelector("#input-toggle");Z.addEventListener("click",(function(t){const e=t.target;if(e.classList.contains("js-add-to-watched")||e.classList.contains("js-add-to-queue")){tt.checked?(et=C.getLocalStorage(),console.log("Day",et)):(et=F.getLocalStorage(),console.log("Week",et));const t=Z.lastElementChild.lastElementChild.id,n=et.filter((e=>e.id==t));if(console.dir(e),e.classList.contains("js-add-to-watched")){D.getLocalStorage()||D.setLocalStorage(),D.addFilmtoStorage(n)}else if(e.classList.contains("js-add-to-queue")){O.getLocalStorage()||O.setLocalStorage(),O.addFilmtoStorage(n)}e.disabled="true",e.style.background="#FF7F50"}}));let et=null;var nt={};let ot;function st(t){"Escape"===t.code&&ot.close()}nt=function t(e,n,o){function s(a,c){if(!n[a]){if(!e[a]){var r=void 0;if(!c&&r)return r(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};e[a][0].call(d.exports,(function(t){return s(e[a][1][t]||t)}),d,d.exports,t,e,n,o)}return n[a].exports}for(var i=void 0,a=0;a<o.length;a++)s(o[a]);return s}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=t.trim(),!0===e?n.children:n.firstChild},s=function(t,e){var n=t.children;return 1===n.length&&n[0].tagName===e},i=function(t){return null!=(t=t||document.querySelector(".basicLightbox"))&&!0===t.ownerDocument.body.contains(t)};n.visible=i,n.create=function(t,e){var n=function(t,e){var n=o('\n\t\t<div class="basicLightbox '.concat(e.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=n.querySelector(".basicLightbox__placeholder");t.forEach((function(t){return i.appendChild(t)}));var a=s(i,"IMG"),c=s(i,"VIDEO"),r=s(i,"IFRAME");return!0===a&&n.classList.add("basicLightbox--img"),!0===c&&n.classList.add("basicLightbox--video"),!0===r&&n.classList.add("basicLightbox--iframe"),n}(t=function(t){var e="string"==typeof t,n=t instanceof HTMLElement==1;if(!1===e&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===e?Array.from(o(t,!0)):"TEMPLATE"===t.tagName?[t.content.cloneNode(!0)]:Array.from(t.children)}(t),e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(t=Object.assign({},t)).closable&&(t.closable=!0),null==t.className&&(t.className=""),null==t.onShow&&(t.onShow=function(){}),null==t.onClose&&(t.onClose=function(){}),"boolean"!=typeof t.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof t.className)throw new Error("Property `className` must be a string");if("function"!=typeof t.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof t.onClose)throw new Error("Property `onClose` must be a function");return t}(e)),a=function(t){return!1!==e.onClose(c)&&function(t,e){return t.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(t)||t.parentElement.removeChild(t),e()}),410),!0}(n,(function(){if("function"==typeof t)return t(c)}))};!0===e.closable&&n.addEventListener("click",(function(t){t.target===n&&a()}));var c={element:function(){return n},visible:function(){return i(n)},show:function(t){return!1!==e.onShow(c)&&function(t,e){return document.body.appendChild(t),setTimeout((function(){requestAnimationFrame((function(){return t.classList.add("basicLightbox--visible"),e()}))}),10),!0}(n,(function(){if("function"==typeof t)return t(c)}))},close:a};return c}},{}]},{},[1])(1),p.addEventListener("click",(function(t){const e=t.target.closest(".js__youtube__btn");if(!e)return;const n=Number(e.dataset.modalId);e&&(!async function(t){const e=await o(t);!function(t){ot=nt.create(`<iframe class="trailer-container" width="560" height="315" src="https://www.youtube.com/embed/${t}" frameborder="0" allowfullscreen></iframe>`,{onShow:()=>document.addEventListener("keydown",st)},{onClose:()=>document.removeEventListener("keydown",st)}),ot.show()}(e.results[0].key)}(n),console.log(n))}));
//# sourceMappingURL=index.59e4b8ff.js.map
