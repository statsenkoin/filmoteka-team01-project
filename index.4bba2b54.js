async function t(){try{const t=fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e55542ecb6aab3d889d16953eac82937");return(await t).json()}catch(t){return console.log("error :>> ",t)}}async function e(t){try{const e=fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=e55542ecb6aab3d889d16953eac82937&page=${t}`);return(await e).json()}catch(t){return console.log("error :>> ",t)}}async function n(t){try{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=e55542ecb6aab3d889d16953eac82937&page=${t}`);return await e.json()}catch(t){return console.log("error :>> ",t)}}async function o(t){try{const e=fetch(`https://api.themoviedb.org/3/movie/${t}/videos?api_key=e55542ecb6aab3d889d16953eac82937&language=en-US`);return(await e).json()}catch(t){}return console.log("error :>> ",error)}let i,s,r,a,c=9,l=1;function d(t,e,n){r=n,l=t,s=e,i=function(t,e){const n=[];let o,i;const s=Math.floor(c/2);t<1?t=1:t>e&&(t=e);e<=c?(o=1,i=e):t<=s?(o=1,i=c):t+s>=e?(o=e-2*s,i=e):(o=t-s,i=t+s);for(let t=o;t<=i;t+=1)n.push(t);c>=9&&(n.splice(0,1,1),n.splice(n.length-1,1,e),t-1>s&&e>c&&n.splice(1,1," ..."),t+1+s<e&&e>c&&n.splice(n.length-2,1,"... "));return n}(l,s),function(t,e){let n=t.reduce(((t,e)=>t+`<button type="button" ${e===l?'class="pagination-button pagination-button-current"':'class="pagination-button"'}>${e}</button>`),"");s>c&&(1!==l&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),l!==s&&(n+='<button type="button" class="pagination-button">&gt;</button>'));e.innerHTML="",e.insertAdjacentHTML("beforeend",n)}(i,r)}function u(t){if("BUTTON"!==t.target.nodeName)return;const e=t.target.textContent;return isNaN(Number(e))||(a=Number(e)),">"===e&&(a=l===s?s:l+1),"<"===e&&(a=1===l?1:l-1)," ..."===e&&(a=l-(c-4)),"... "===e&&(a=l+(c-4)),l=a,l}window.addEventListener("resize",(()=>{const t=window.matchMedia("(min-width: 768px)").matches;c=t?9:5,d(l,s,r)}));const m={scrollPosition:null,disabledScroll(){m.scrollPosition=window.scrollY,document.body.style.cssText=`\n        overflow: hidden;\n        top: -${m.scrollPosition}px;\n        left: 0;\n        height: 100vh;\n        width: 100vw;\n        padding-right: ${window.innerWidth-document.body.offsetWidth}px;\n        `},enabledScroll(){document.body.style.cssText="",window.scroll({top:m.scrollPosition})}};var h=m;function f(){const t=document.querySelectorAll(".js-modal-triger"),e=document.querySelector(".backdrop"),n=document.querySelectorAll(".modal"),o=document.querySelectorAll(".modal-close-btn");function i(t){t.preventDefault();const n=t.currentTarget.dataset.modal;document.querySelector("."+n).classList.add("active"),e.classList.add("active"),h.disabledScroll()}function s(t){t.preventDefault(),this.closest(".modal").classList.remove("active"),e.classList.remove("active"),h.enabledScroll()}document.addEventListener("keydown",(function(t){if("Escape"!==t.code)return;Array.from(n).forEach((t=>{t.classList.remove("active"),h.enabledScroll()})),e.classList.remove("active"),h.enabledScroll()})),e.addEventListener("click",(function(t){Array.from(n).forEach((t=>{t.classList.remove("active"),h.enabledScroll()})),e.classList.remove("active"),h.enabledScroll()})),Array.from(t).forEach((t=>{t.addEventListener("click",i)})),Array.from(o).forEach((t=>{t.addEventListener("click",s)}))}const b={genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]};function g(t,e){console.log(t);const n=new Date,o=t.map((({id:t,title:e,genre_ids:o,original_title:i,release_date:s,poster_path:r})=>`<li class="movies-images__item" data-id=${t}>\n            <img class="movie-image" src="https://image.tmdb.org/t/p/w500${r||"https://icon-library.com/images/no-image-icon/no-image-icon-0.jpg"}" \n            alt="Movie ${e||i}" />\n        <div class="box-description">\n            <h2 class="box-description__title">${e||i}</h2>\n            <p class="box-description__text">\n                <span class="box-description__span">${function(t,e=b.genres){let n=[];for(const o of t){const t=e.find((t=>t.id===o));n.push(t.name)}n.length>3&&(n=n.slice(0,2),n.push("Other"));return n.join(", ")}(o)}</span>${n.getFullYear(s)}\n            </p>\n        </div>\n    </li>`)).join("");e.innerHTML=o}f();function p(t,e=b.genres){let n=[];for(const o of t){const t=e.find((t=>t.id===o));n.push(t.name)}return n.join(", ")}const v=document.querySelector(".modal-film-info");function y(t,e){const{id:n,title:o,poster_path:i,vote_average:s,vote_count:r,popularity:a,original_title:c,overview:l}=t,d=`<div class="poster-block">\n        <img class="poster" src="https://image.tmdb.org/t/p/w500/${i}" />\n           <button type="button" data-modal-id=${n}  class="youtube__btn js__youtube__btn"><i class="fa fa-youtube-play"></i></button>\n      </div>\n      <div class="film-information">\n        <h2 class="film-information-title">${o}</h2>\n        <table class="rating-table">\n          <tr>\n            <td class="table-subtitle">Vote / Votes</td>\n            <td class="table-inf"><span class="rating">${s.toFixed(1)}</span> / ${r}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Popularity</td>\n            <td class="table-inf">${a.toFixed(1)}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Original Title</td>\n            <td class="table-inf">${c}</td>\n          </tr>\n          <tr>\n            <td class="table-subtitle">Genre</td>\n            <td class="table-inf">${e}</td>\n          </tr>\n        </table>\n        <p class="about">About</p>\n        <p class="about-film">\n          ${l}\n        </p>\n        <div class="buttons-add">\n          <button type="button" class="btn-add">add to Watched</button>\n          <button type="button" class="btn-add">add to queue</button>\n        </div>\n      </div>`;v.innerHTML=d}const w=new class{getRefs(t){const e={};return e.spinner=document.querySelector(t),e}show(){this.refs.spinner.classList.remove("is-hidden")}hide(){this.refs.spinner.classList.add("is-hidden")}constructor({selector:t,hidden:e=!0}){this.refs=this.getRefs(t),e&&this.hide()}}({selector:".loading"});let L,S;console.log("ðŸš€ ~ loadSpinner",w);let _=1,E=1;const x=document.querySelector(".pagination");x.addEventListener("click",(async function(t){w.show();const e=u(t);if(e===_)return;_=e,await T(),w.hide()}));const k=document.querySelector(".home-gallery");async function T(){w.show();const t=await e(_);S=t.results,E=t.total_pages,console.log("locStorageFilms :>> ",S),console.log("totalPages :>> ",E),g(S,k),d(_,E,x),w.hide()}!async function(){w.show();const e=await t();L=e.genres,console.log("locStorageGenres :>> ",L),await T(),w.hide()}(),k.addEventListener("click",(function(t){const e=t.target.closest(".movies-images__item");if(!e)return;const n=Number(e.dataset.id),o=S.find((t=>t.id===n)),i=p(o.genre_ids);f(),y(o,i)}));const $=" popularByWeek",N=" popularByDay",q="watched",M="queue",A="genres";class C{setLocalStorage(t){localStorage.setItem(this.key,JSON.stringify(t))}getLocalStorage(){try{const t=localStorage.getItem(this.key);if(t)return JSON.parse(t)}catch(t){console.log("Error",t)}}addFilmtoStorage(t){const e=this.getLocalStorage(this.key);e.push(t),this.value=e,this.setLocalStorage(this.value)}deleteFilmFromStorage(t){const e=this.getLocalStorage(this.key);if(e.length)if(e.find((e=>e.id===t.id))){console.log("I`m delete film from the collection!");const n=e.findIndex((e=>e.id===t.id));e.splice(n,1),this.value=currentFilms,this.setLocalStorage(this.value)}else console.log("Cannot find film in collection")}constructor(t,e=[]){this.key=t,this.value=e}}const j=new C(N),F=new C($),O=new C(q),P=new C(M),D=new C(A);j.setLocalStorage([]),F.setLocalStorage([]),O.setLocalStorage([]),P.setLocalStorage([]),D.setLocalStorage([]);({el:document.querySelector(".btn-up"),scrolling:!1,show(){this.el.classList.contains("btn-up_hide")&&!this.el.classList.contains("btn-up_hiding")&&(this.el.classList.remove("btn-up_hide"),this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.remove("btn-up_hiding")}),300))},hide(){this.el.classList.contains("btn-up_hide")||this.el.classList.contains("btn-up_hiding")||(this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.add("btn-up_hide"),this.el.classList.remove("btn-up_hiding")}),300))},addEventListener(){window.addEventListener("scroll",(()=>{const t=window.scrollY||document.documentElement.scrollTop;this.scrolling&&t>0||(this.scrolling=!1,t>400?this.show():this.hide())})),document.querySelector(".btn-up").onclick=()=>{this.scrolling=!0,this.hide(),window.scrollTo({top:0,left:0,behavior:"smooth"})}}}).addEventListener();const H=document.querySelector("#input-toggle");const I=document.querySelector(".home-gallery");H.addEventListener("change",(function(){if(H.checked){n(1).then((t=>{const e=t.results;j.setLocalStorage(e),g(e,I)}))}else{e(1).then((t=>{const e=t.results;F.setLocalStorage(e),g(e,I)}))}}));document.querySelector(".btn-add").addEventListener("click",(function(t){console.dir(t.target);const e=t.target,n=(e.closest(".film-information").children[0].textContent,F.getLocalStorage());console.log(n)}));var W={};let R;function U(t){"Escape"===t.code&&R.close()}W=function t(e,n,o){function i(r,a){if(!n[r]){if(!e[r]){var c=void 0;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};e[r][0].call(d.exports,(function(t){return i(e[r][1][t]||t)}),d,d.exports,t,e,n,o)}return n[r].exports}for(var s=void 0,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=t.trim(),!0===e?n.children:n.firstChild},i=function(t,e){var n=t.children;return 1===n.length&&n[0].tagName===e},s=function(t){return null!=(t=t||document.querySelector(".basicLightbox"))&&!0===t.ownerDocument.body.contains(t)};n.visible=s,n.create=function(t,e){var n=function(t,e){var n=o('\n\t\t<div class="basicLightbox '.concat(e.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),s=n.querySelector(".basicLightbox__placeholder");t.forEach((function(t){return s.appendChild(t)}));var r=i(s,"IMG"),a=i(s,"VIDEO"),c=i(s,"IFRAME");return!0===r&&n.classList.add("basicLightbox--img"),!0===a&&n.classList.add("basicLightbox--video"),!0===c&&n.classList.add("basicLightbox--iframe"),n}(t=function(t){var e="string"==typeof t,n=t instanceof HTMLElement==1;if(!1===e&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===e?Array.from(o(t,!0)):"TEMPLATE"===t.tagName?[t.content.cloneNode(!0)]:Array.from(t.children)}(t),e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(t=Object.assign({},t)).closable&&(t.closable=!0),null==t.className&&(t.className=""),null==t.onShow&&(t.onShow=function(){}),null==t.onClose&&(t.onClose=function(){}),"boolean"!=typeof t.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof t.className)throw new Error("Property `className` must be a string");if("function"!=typeof t.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof t.onClose)throw new Error("Property `onClose` must be a function");return t}(e)),r=function(t){return!1!==e.onClose(a)&&function(t,e){return t.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===s(t)||t.parentElement.removeChild(t),e()}),410),!0}(n,(function(){if("function"==typeof t)return t(a)}))};!0===e.closable&&n.addEventListener("click",(function(t){t.target===n&&r()}));var a={element:function(){return n},visible:function(){return s(n)},show:function(t){return!1!==e.onShow(a)&&function(t,e){return document.body.appendChild(t),setTimeout((function(){requestAnimationFrame((function(){return t.classList.add("basicLightbox--visible"),e()}))}),10),!0}(n,(function(){if("function"==typeof t)return t(a)}))},close:r};return a}},{}]},{},[1])(1),v.addEventListener("click",(function(t){const e=t.target.closest(".js__youtube__btn");if(!e)return;const n=Number(e.dataset.modalId);e&&(!async function(t){const e=await o(t);!function(t){R=W.create(`<iframe class="trailer-container" width="560" height="315" src="https://www.youtube.com/embed/${t}" frameborder="0" allowfullscreen></iframe>`,{onShow:()=>document.addEventListener("keydown",U)},{onClose:()=>document.removeEventListener("keydown",U)}),R.show()}(e.results[0].key)}(n),console.log(n))}));
//# sourceMappingURL=index.4bba2b54.js.map
