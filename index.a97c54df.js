!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o,i,c,s=a("bpxeT"),u=a("2TvXO"),l=a("1h2Gi"),d=9,f=1;function p(e,t,n){i=n,function(e,t){var n=e.reduce((function(e,t){return e+'<button type="button" '.concat(t===f?'class="pagination-button pagination-button-current"':'class="pagination-button"',">").concat(t,"</button>")}),"");o>d&&(1!==f&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),f!==o&&(n+='<button type="button" class="pagination-button">&gt;</button>'));t.innerHTML="",t.insertAdjacentHTML("beforeend",n)}(function(e,t){var n,r,a=[],o=Math.floor(d/2);e<1?e=1:e>t&&(e=t);t<=d?(n=1,r=t):e<=o?(n=1,r=d):e+o>=t?(n=t-2*o,r=t):(n=e-o,r=e+o);for(var i=n;i<=r;i+=1)a.push(i);d>=9&&(a.splice(0,1,1),a.splice(a.length-1,1,t),e-1>o&&t>d&&a.splice(1,1," ..."),e+1+o<t&&t>d&&a.splice(a.length-2,1,"... "));return a}(f=e,o=t),i)}function h(e){var t=e.target.textContent;return isNaN(Number(t))||(c=Number(t)),">"===t&&(c=f===o?o:f+1),"<"===t&&(c=1===f?1:f-1)," ..."===t&&(c=f-(d-4)),"... "===t&&(c=f+(d-4)),f=c}window.addEventListener("resize",(function(){var e=window.matchMedia("(min-width: 768px)").matches;d=e?9:5,p(f,o,i)}));var m=a("LW3sO"),g=a("kf3wk"),v=a("j1lrD"),y=a("4LMMA"),w=a("8FeKp"),x=document.querySelector(".dropdown"),b=document.querySelector(".items");x.addEventListener("click",(function(e){e.preventDefault(),x.classList.toggle("active")})),function(){w.dataGenres.genres.unshift({id:"all",name:"ALL"});var e=w.dataGenres.genres.map((function(e,t){return'<a href="#" style="--i:'.concat(t+1,'" id="').concat(e.id,'">\n           <span></span>').concat(e.name,"\n         </a>")})).join("");b.insertAdjacentHTML("beforeend",e)}();g=a("kf3wk");var L,k,S,F=new(0,y.LocalStorage)("currentFilmsList"),q=new(0,v.default)({selector:".loading"}),T=document.querySelector(".home-gallery"),M=document.querySelector(".pagination"),N=document.querySelector("#input-toggle"),E=document.querySelector(".search-form"),j=document.querySelector(".error-text");M.addEventListener("click",(function(e){return J.apply(this,arguments)})),N.addEventListener("change",(function(e){return K.apply(this,arguments)})),b.addEventListener("click",(function(e){return I.apply(this,arguments)})),E.addEventListener("submit",(function(e){return P.apply(this,arguments)}));var O,D="",_=1,A=1,C=1,G=!1,W=!1,B=!1;function H(){return(H=e(s)(e(u).mark((function t(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.show(),e.next=3,(0,l.fetchGenre)();case 3:return L=e.sent,k=L.genres,y.genresFilm.setLocalStorage(k),e.next=8,Q();case 8:(0,g.default)(),window.scrollTo(0,0),q.hide();case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Q(){return R.apply(this,arguments)}function R(){return(R=e(s)(e(u).mark((function t(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.show(),e.next=3,U();case 3:C=W?300:L.total_pages,S=L.results,F.setLocalStorage(S),(0,m.markupTrending)(S,T),p(A,C,M),q.hide(),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function U(){return z.apply(this,arguments)}function z(){return(z=e(s)(e(u).mark((function t(){var n;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=12;break}return e.next=3,(0,l.fetchQuery)(D,A);case 3:if((n=e.sent).results.length){e.next=9;break}return A=_,q.hide(),X(),e.abrupt("return");case 9:L=n,e.next=28;break;case 12:if(!W){e.next=18;break}return e.next=15,(0,l.fetchMoivesByGenre)(O,A);case 15:L=e.sent,e.next=28;break;case 18:if(!G){e.next=24;break}return e.next=21,(0,l.fetchPopularDay)(A);case 21:e.t0=e.sent,e.next=27;break;case 24:return e.next=26,(0,l.fetchPopular)(A);case 26:e.t0=e.sent;case 27:L=e.t0;case 28:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),W=!0,B=!1,O=n.target.id,A=1,e.next=7,Q();case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function K(){return(K=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G=n.currentTarget.checked,W=!1,B=!1,A=1,e.next=6,Q();case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),D=n.target.elements.searchQuery.value.trim(),E.reset(),D){e.next=6;break}return X(),e.abrupt("return");case 6:return B=!0,W=!1,_=A,A=1,e.next=12,Q();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function X(){j.style.opacity="1",setTimeout((function(){j.style.opacity="0"}),2e3)}function J(){return(J=e(s)(e(u).mark((function t(n){var r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:if(q.show(),(r=h(n))!==A){e.next=6;break}return e.abrupt("return");case 6:return A=r,e.next=9,Q();case 9:q.hide();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}j.style.opacity="0",function(){H.apply(this,arguments)}(),a("iNWLi"),a("4LMMA");var V=a("8nrFW"),Y=(y=a("4LMMA"),a("h6c0i")),Z=(m=a("LW3sO"),{width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3});T.addEventListener("click",(function(e){var t=e.target.closest(".movies-images__item");if(!t)return;re=Number(t.dataset.id);var n=(te=F.getLocalStorage()).find((function(e){return e.id===re})),r=(0,m.getGenreByIdList)(n.genre_ids);$=y.watchedFilms.getLocalStorage(),ae=!!$.length&&$.find((function(e){return e.id==re})),ee=y.queueFilms.getLocalStorage(),oe=!!ee.length&&ee.find((function(e){return e.id==re})),(0,m.createMarkupModalWindow)(n,r,ae,oe)})),document.querySelector(".js-filmInfoModal").addEventListener("click",(function(t){var n=t.target;if(ne=te.filter((function(e){return e.id==re})),n.classList.contains("js-add-to-watched")||n.classList.contains("js-add-to-queue")){var r;if(n.classList.contains("js-add-to-watched"))if(ae)y.watchedFilms.deleteFilmFromStorage(ne[0]),t.target.textContent="add to watched",Y.Notify.success("The movie is deleted from to my library",Z),ae=!1;else(r=y.watchedFilms).addFilmtoStorage.apply(r,e(V)(ne)),t.target.textContent="remove from watched",Y.Notify.success("The movie has been added to my library",Z),ae=!0;else if(n.classList.contains("js-add-to-queue")){var a;if(oe)y.queueFilms.deleteFilmFromStorage(ne[0]),t.target.textContent="add to queue",Y.Notify.success("The movie is deleted from queue",Z),oe=!1;else(a=y.queueFilms).addFilmtoStorage.apply(a,e(V)(ne)),t.target.textContent="remove from queue",Y.Notify.success("The movie has been added to queue",Z),oe=!0}}}));var $,ee,te,ne,re,ae=!1,oe=!1;!function(){y.watchedFilms.getLocalStorage()||y.watchedFilms.setLocalStorage();y.queueFilms.getLocalStorage()||y.queueFilms.setLocalStorage()}(),a("LW3sO"),a("475fx"),a("kf3wk"),a("cDXQO"),a("kLpTw"),a("8FeKp")}();
//# sourceMappingURL=index.a97c54df.js.map
