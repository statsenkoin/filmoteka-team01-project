var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var o=n("7me8F"),i=n("fME8n"),r=n("fA0uA"),s=(n("7TcCz"),n("04jNI")),c=n("b5rV1"),d=n("9AkgD");const l=document.querySelector(".dropdown"),u=document.querySelector(".items");l.addEventListener("click",(function(e){e.preventDefault(),l.classList.toggle("active")})),function(){d.dataGenres.genres.unshift({id:"all",name:"ALL"});const e=d.dataGenres.genres.map(((e,t)=>`<a href="#" style="--i:${t+1}" id="${e.id}">\n           <span></span>${e.name}\n         </a>`)).join("");u.insertAdjacentHTML("beforeend",e)}(),(0,n("7TcCz").default)();const f=new(0,c.LocalStorage)("currentFilmsList"),g=new(0,s.default)({selector:".loading"}),m=document.querySelector(".home-gallery"),h=document.querySelector(".pagination"),y=document.querySelector("#input-toggle"),w=document.querySelector(".search-form"),p=document.querySelector(".error-text");let v,L,S;h.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;g.show();const t=(0,i.getCurrentPage)(e);if(t===b)return;b=t,await E(),g.hide()})),y.addEventListener("change",(async function(e){k=e.currentTarget.checked,A=!1,C=!1,b=1,await E()})),u.addEventListener("click",(async function(e){e.preventDefault(),A=!0,C=!1,q=e.target.id,b=1,await E()})),w.addEventListener("submit",(async function(e){if(e.preventDefault(),F=e.target.elements.searchQuery.value.trim(),w.reset(),!F)return void N();C=!0,A=!1,T=b,b=1,await E()}));let q,F="",T=1,b=1,x=1,k=!1,A=!1,C=!1;async function E(){g.show(),await async function(){if(C){const e=await(0,o.fetchQuery)(F,b);if(!e.results.length)return b=T,g.hide(),void N();v=e}else v=A?await(0,o.fetchMoivesByGenre)(q,b):k?await(0,o.fetchPopularDay)(b):await(0,o.fetchPopular)(b)}(),x=A?300:v.total_pages,S=v.results,f.setLocalStorage(S),(0,r.markupTrending)(S,m),(0,i.updatePagination)(b,x,h),g.hide(),window.scrollTo(0,0)}function N(){p.style.opacity="1",setTimeout((()=>{p.style.opacity="0"}),2e3)}p.style.opacity="0",async function(){g.show(),v=await(0,o.fetchGenre)(),L=v.genres,c.genresFilm.setLocalStorage(L),await E(),g.hide()}(),window.scrollTo(0,0),n("b5rV1"),n("6gB84"),n("7TcCz"),n("6lsda"),n("9AkgD"),n("fA0uA");c=n("b5rV1");var j=n("iQIUW");r=n("fA0uA");const D={width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3};m.addEventListener("click",(function(e){const t=e.target.closest(".movies-images__item");if(!t)return;B=Number(t.dataset.id),G=f.getLocalStorage();const a=G.find((e=>e.id===B)),n=(0,r.getGenreByIdList)(a.genre_ids);M=c.watchedFilms.getLocalStorage(),I=!!M.length&&M.find((e=>e.id==B)),_=c.queueFilms.getLocalStorage(),O=!!_.length&&_.find((e=>e.id==B)),(0,r.createMarkupModalWindow)(a,n,I,O)}));document.querySelector(".js-filmInfoModal").addEventListener("click",(function(e){const t=e.target;z=G.filter((e=>e.id==B)),(t.classList.contains("js-add-to-watched")||t.classList.contains("js-add-to-queue"))&&(t.classList.contains("js-add-to-watched")?I?(c.watchedFilms.deleteFilmFromStorage(z[0]),e.target.textContent="add to watched",j.Notify.success("The movie is deleted from to my library",D),I=!1):(c.watchedFilms.addFilmtoStorage(...z),e.target.textContent="remove from watched",j.Notify.success("The movie has been added to my library",D),I=!0):t.classList.contains("js-add-to-queue")&&(O?(c.queueFilms.deleteFilmFromStorage(z[0]),e.target.textContent="add to queue",j.Notify.success("The movie is deleted from queue",D),O=!1):(c.queueFilms.addFilmtoStorage(...z),e.target.textContent="remove from queue",j.Notify.success("The movie has been added to queue",D),O=!0)))}));let M,_,G,z,B,I=!1,O=!1;!function(){c.watchedFilms.getLocalStorage()||c.watchedFilms.setLocalStorage();c.queueFilms.getLocalStorage()||c.queueFilms.setLocalStorage()}(),n("37v9V"),n("2ix2C");
//# sourceMappingURL=index.989d5774.js.map
