!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o,i,c,s=a("bpxeT"),u=a("2TvXO"),l=a("1h2Gi"),d=9,f=1;function p(e,t,n){i=n,function(e,t){var n=e.reduce((function(e,t){return e+'<button type="button" '.concat(t===f?'class="pagination-button pagination-button-current"':'class="pagination-button"',">").concat(t,"</button>")}),"");o>d&&(1!==f&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),f!==o&&(n+='<button type="button" class="pagination-button">&gt;</button>'));t.innerHTML="",t.insertAdjacentHTML("beforeend",n)}(function(e,t){var n,r,a=[],o=Math.floor(d/2);e<1?e=1:e>t&&(e=t);t<=d?(n=1,r=t):e<=o?(n=1,r=d):e+o>=t?(n=t-2*o,r=t):(n=e-o,r=e+o);for(var i=n;i<=r;i+=1)a.push(i);d>=9&&(a.splice(0,1,1),a.splice(a.length-1,1,t),e-1>o&&t>d&&a.splice(1,1," ..."),e+1+o<t&&t>d&&a.splice(a.length-2,1,"... "));return a}(f=e,o=t),i)}function h(e){var t=e.target.textContent;return isNaN(Number(t))||(c=Number(t)),">"===t&&(c=f===o?o:f+1),"<"===t&&(c=1===f?1:f-1)," ..."===t&&(c=f-(d-4)),"... "===t&&(c=f+(d-4)),f=c}window.addEventListener("resize",(function(){var e=window.matchMedia("(min-width: 768px)").matches;d=e?9:5,p(f,o,i)}));var m=a("LW3sO"),g=a("kf3wk"),v=a("j1lrD"),y=a("4LMMA"),w=(y=a("4LMMA"),document.querySelector(".dropdown")),x=document.querySelector(".items");w.addEventListener("click",(function(e){e.preventDefault(),w.classList.toggle("active")})),function(){var e=y.genresFilm.getLocalStorage();e.unshift({id:"all",name:"ALL"});var t=e.map((function(e,t){return'<a href="#" style="--i:'.concat(t+1,'" id="').concat(e.id,'">\n           <span></span>').concat(e.name,"\n         </a>")})).join("");x.insertAdjacentHTML("beforeend",t)}();g=a("kf3wk");var b,L,k,S=new(0,y.LocalStorage)("currentFilmsList"),q=new(0,v.default)({selector:".loading"}),F=document.querySelector(".home-gallery"),T=document.querySelector(".pagination"),M=document.querySelector("#input-toggle"),N=document.querySelector(".search-form"),E=document.querySelector(".error-text");T.addEventListener("click",(function(e){return J.apply(this,arguments)})),M.addEventListener("change",(function(e){return I.apply(this,arguments)})),x.addEventListener("click",(function(e){return z.apply(this,arguments)})),N.addEventListener("submit",(function(e){return P.apply(this,arguments)}));var j,O="",D=1,_=1,A=1,C=!1,W=!1,G=!1;function B(){return(B=e(s)(e(u).mark((function t(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.show(),e.next=3,(0,l.fetchGenre)();case 3:return b=e.sent,L=b.genres,y.genresFilm.setLocalStorage(L),e.next=8,H();case 8:(0,g.default)(),window.scrollTo(0,0),q.hide();case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function H(){return Q.apply(this,arguments)}function Q(){return(Q=e(s)(e(u).mark((function t(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.show(),e.next=3,R();case 3:A=W?300:b.total_pages,k=b.results,S.setLocalStorage(k),(0,m.markupTrending)(k,F),p(_,A,T),q.hide(),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function R(){return U.apply(this,arguments)}function U(){return(U=e(s)(e(u).mark((function t(){var n;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=12;break}return e.next=3,(0,l.fetchQuery)(O,_);case 3:if((n=e.sent).results.length){e.next=9;break}return _=D,q.hide(),X(),e.abrupt("return");case 9:b=n,e.next=28;break;case 12:if(!W){e.next=18;break}return e.next=15,(0,l.fetchMoivesByGenre)(j,_);case 15:b=e.sent,e.next=28;break;case 18:if(!C){e.next=24;break}return e.next=21,(0,l.fetchPopularDay)(_);case 21:e.t0=e.sent,e.next=27;break;case 24:return e.next=26,(0,l.fetchPopular)(_);case 26:e.t0=e.sent;case 27:b=e.t0;case 28:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function z(){return(z=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),W=!0,G=!1,j=n.target.id,_=1,e.next=7,H();case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C=n.currentTarget.checked,W=!1,G=!1,_=1,e.next=6,H();case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),O=n.target.elements.searchQuery.value.trim(),N.reset(),O){e.next=6;break}return X(),e.abrupt("return");case 6:return G=!0,W=!1,D=_,_=1,e.next=12,H();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function X(){E.style.opacity="1",setTimeout((function(){E.style.opacity="0"}),2e3)}function J(){return(J=e(s)(e(u).mark((function t(n){var r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:if(q.show(),(r=h(n))!==_){e.next=6;break}return e.abrupt("return");case 6:return _=r,e.next=9,H();case 9:q.hide();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}E.style.opacity="0",function(){B.apply(this,arguments)}(),a("iNWLi"),a("4LMMA");var K=a("8nrFW"),V=(y=a("4LMMA"),a("h6c0i")),Y=(m=a("LW3sO"),{width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3});F.addEventListener("click",(function(e){var t=e.target.closest(".movies-images__item");if(!t)return;ne=Number(t.dataset.id);var n=(ee=S.getLocalStorage()).find((function(e){return e.id===ne})),r=(0,m.getGenreByIdList)(n.genre_ids);Z=y.watchedFilms.getLocalStorage(),re=!!Z.length&&Z.find((function(e){return e.id==ne})),$=y.queueFilms.getLocalStorage(),ae=!!$.length&&$.find((function(e){return e.id==ne})),(0,m.createMarkupModalWindow)(n,r,re,ae)})),document.querySelector(".js-filmInfoModal").addEventListener("click",(function(t){var n=t.target;if(te=ee.filter((function(e){return e.id==ne})),n.classList.contains("js-add-to-watched")||n.classList.contains("js-add-to-queue")){var r;if(n.classList.contains("js-add-to-watched"))if(re)y.watchedFilms.deleteFilmFromStorage(te[0]),t.target.textContent="add to watched",V.Notify.success("The movie is deleted from to my library",Y),re=!1;else(r=y.watchedFilms).addFilmtoStorage.apply(r,e(K)(te)),t.target.textContent="remove from watched",V.Notify.success("The movie has been added to my library",Y),re=!0;else if(n.classList.contains("js-add-to-queue")){var a;if(ae)y.queueFilms.deleteFilmFromStorage(te[0]),t.target.textContent="add to queue",V.Notify.success("The movie is deleted from queue",Y),ae=!1;else(a=y.queueFilms).addFilmtoStorage.apply(a,e(K)(te)),t.target.textContent="remove from queue",V.Notify.success("The movie has been added to queue",Y),ae=!0}}}));var Z,$,ee,te,ne,re=!1,ae=!1;!function(){y.watchedFilms.getLocalStorage()||y.watchedFilms.setLocalStorage();y.queueFilms.getLocalStorage()||y.queueFilms.setLocalStorage()}(),a("LW3sO"),a("475fx"),a("kf3wk"),a("cDXQO"),a("kLpTw")}();
//# sourceMappingURL=index.5fb99a56.js.map
