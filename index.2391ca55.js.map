{"mappings":"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","sources":["src/js/api-service.js","src/js/custom-pagination.js","src/js/filmoteka.js","src/js/btn-up.js"],"sourcesContent":["const API_KEY = 'e55542ecb6aab3d889d16953eac82937';\nconst URL = 'https://api.themoviedb.org/3';\nconst QUERY_TRENDING = '/trending/movie/week';\nconst QUERY_GENRE = '/genre/movie/list';\nconst QUERY_MOVIE = '/movie';\n\nexport async function fetchGenre() {\n  try {\n    const responce = fetch(`${URL}${QUERY_GENRE}?api_key=${API_KEY}`);\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nexport async function fetchSingleMovie(movieId) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_MOVIE}/${movieId}?api_key=${API_KEY}&language=en-US`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nexport async function fetchQuery(queryByWord, page) {\n  try {\n    const responce = fetch(\n      `${URL}/search/movie?api_key=${API_KEY}&page=${page}&query=${queryByWord}`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nexport async function fetchPopular(page) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_TRENDING}?api_key=${API_KEY}&page=${page}`\n    );\n\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n","// https://jasonwatmore.com/post/2018/08/07/javascript-pure-pagination-logic-in-vanilla-js-typescript\n\nlet maxPages = 9; //maximum number of page navigation links to display\nlet output;\nlet currentPage = 1;\nlet totalPages;\nlet paginationElem;\n\nlet targetPage;\n\n/**\n * to export - marking up pagination line\n * @param {Number} page - the current active page\n * @param {Number} pages - the total number of pages\n * @param {DOM element} paginationRef - where to put pagination line\n */\nexport function updatePagination(page, pages, paginationRef) {\n  paginationElem = paginationRef;\n  currentPage = page;\n  totalPages = pages;\n  output = paginate(currentPage, totalPages);\n  markupPagination(output, paginationElem);\n}\n\n/**\n *\n * @param {event} event click on button element\n * @returns currentPage\n */\nexport function getCurrentPage(event) {\n  if (event.target.nodeName !== 'BUTTON') return;\n  const targetPageText = event.target.textContent;\n\n  if (!isNaN(Number(targetPageText))) targetPage = Number(targetPageText);\n  if (targetPageText === '>') {\n    targetPage = currentPage === totalPages ? totalPages : currentPage + 1;\n  }\n  if (targetPageText === '<') {\n    targetPage = currentPage === 1 ? 1 : currentPage - 1;\n  }\n  if (targetPageText === ' ...') targetPage = currentPage - (maxPages - 4);\n  if (targetPageText === '... ') targetPage = currentPage + (maxPages - 4);\n  currentPage = targetPage;\n  return currentPage;\n}\n\n/**\n *\n * @param {Number} currentPage - the current active page\n * @param {Number} totalPages - the total number of pages\n * @returns {Array} of text content for buttons in pagination line\n */\nfunction paginate(currentPage, totalPages) {\n  const output = [];\n  let startPage;\n  let endPage;\n  const offsetPages = Math.floor(maxPages / 2);\n\n  if (currentPage < 1) {\n    currentPage = 1;\n  } else if (currentPage > totalPages) {\n    currentPage = totalPages;\n  }\n\n  if (totalPages <= maxPages) {\n    startPage = 1;\n    endPage = totalPages;\n  } else {\n    if (currentPage <= offsetPages) {\n      startPage = 1;\n      endPage = maxPages;\n    } else if (currentPage + offsetPages >= totalPages) {\n      startPage = totalPages - offsetPages * 2;\n      endPage = totalPages;\n    } else {\n      startPage = currentPage - offsetPages;\n      endPage = currentPage + offsetPages;\n    }\n  }\n  for (let i = startPage; i <= endPage; i += 1) {\n    output.push(i);\n  }\n\n  if (maxPages >= 9) {\n    output.splice(0, 1, 1);\n    output.splice(output.length - 1, 1, totalPages);\n    if (currentPage - 1 > offsetPages && totalPages > maxPages) {\n      output.splice(1, 1, ' ...');\n    }\n    if (currentPage + 1 + offsetPages < totalPages && totalPages > maxPages)\n      output.splice(output.length - 2, 1, '... ');\n  }\n  return output;\n}\n\n/**\n * marking up pagination line\n * @param {Array} output - text content for buttons in pagination line output\n * @param {DOM element} paginationElem - where to put pagination line\n */\nfunction markupPagination(output, paginationElem) {\n  let markup = output.reduce((acc, item) => {\n    const pagiClass =\n      item === currentPage\n        ? 'class=\"pagination-button pagination-button-current\"'\n        : 'class=\"pagination-button\"';\n    return (acc += `<button type=\"button\" ${pagiClass}>${item}</button>`);\n  }, ``);\n  if (totalPages > maxPages) {\n    if (currentPage !== 1) {\n      markup =\n        `<button type=\"button\" class=\"pagination-button\">&lt;</button>` +\n        markup;\n    }\n    if (currentPage !== totalPages) {\n      markup += `<button type=\"button\" class=\"pagination-button\">&gt;</button>`;\n    }\n  }\n\n  paginationElem.innerHTML = '';\n  paginationElem.insertAdjacentHTML('beforeend', markup);\n}\n","import { fetchPopular, fetchGenre } from './api-service';\nimport { updatePagination, getCurrentPage } from './custom-pagination';\n\n// емуляція locale stotage\nlet locStorageGenres;\nlet locStorageFilms;\n// =======================\n\nlet currentPage = 1;\nlet totalPages = 1;\n\n// ===== pagination =====================================\nconst paginationRef = document.querySelector('.pagination');\npaginationRef.addEventListener('click', onPaginationButtonClick);\n\nasync function onPaginationButtonClick(event) {\n  const targetPage = getCurrentPage(event);\n  if (targetPage === currentPage) return;\n  currentPage = targetPage;\n\n  await updateGallery();\n}\n// ======================================================\n\nconst homeGallery = document.querySelector('.home-gallery');\n\ninitGallery();\n\nasync function initGallery() {\n  const data = await fetchGenre();\n  locStorageGenres = data.genres;\n  console.log('locStorageGenres :>> ', locStorageGenres);\n  await updateGallery();\n}\n\nasync function updateGallery() {\n  const data = await fetchPopular(currentPage);\n  locStorageFilms = data.results;\n  totalPages = data.total_pages;\n  console.log('locStorageFilms :>> ', locStorageFilms);\n  console.log('totalPages :>> ', totalPages);\n  // markupTrending(locStorageFilms, homeGallery);\n\n  updatePagination(currentPage, totalPages, paginationRef);\n}\n","export const btnUp = {\n      el: document.querySelector('.btn-up'),\n      scrolling: false,\n      show() {\n        if (this.el.classList.contains('btn-up_hide') && !this.el.classList.contains('btn-up_hiding')) {\n          this.el.classList.remove('btn-up_hide');\n          this.el.classList.add('btn-up_hiding');\n          window.setTimeout(() => {\n            this.el.classList.remove('btn-up_hiding');\n          }, 300);\n        }\n      },\n      hide() {\n        if (!this.el.classList.contains('btn-up_hide') && !this.el.classList.contains('btn-up_hiding')) {\n          this.el.classList.add('btn-up_hiding');\n          window.setTimeout(() => {\n            this.el.classList.add('btn-up_hide');\n            this.el.classList.remove('btn-up_hiding');\n          }, 300);\n        }\n      },\n      addEventListener() {\n        \n        window.addEventListener('scroll', () => {\n          const scrollY = window.scrollY || document.documentElement.scrollTop;\n          if (this.scrolling && scrollY > 0) {\n            return;\n          }\n          this.scrolling = false;\n          \n          if (scrollY > 400) {\n            \n            this.show();\n          } else {\n            \n            this.hide();\n          }\n        });\n        \n        document.querySelector('.btn-up').onclick = () => {\n          this.scrolling = true;\n          this.hide();\n          \n          window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'smooth'\n          });\n        }\n      }\n    }\n\nbtnUp.addEventListener();\n"],"names":["async","$55b58e231f028392$export$13a873f6c4b5d516","responce","fetch","json","error","console","log","$55b58e231f028392$export$16bf2264c00353d2","page","$b7da7886b6ae1331$var$output","$b7da7886b6ae1331$var$totalPages","$b7da7886b6ae1331$var$paginationElem","$b7da7886b6ae1331$var$targetPage","$c848cac843f338cf$var$locStorageGenres","$c848cac843f338cf$var$locStorageFilms","$b7da7886b6ae1331$var$currentPage","$b7da7886b6ae1331$export$909ec5aabce1b1f7","pages","paginationRef","currentPage1","totalPages1","output1","startPage","endPage","offsetPages","Math","floor","$b7da7886b6ae1331$var$maxPages","i","push","splice","length","$b7da7886b6ae1331$var$paginate","output2","paginationElem1","markup","reduce","acc","item","innerHTML","insertAdjacentHTML","$b7da7886b6ae1331$var$markupPagination","$b7da7886b6ae1331$export$7945ba8eb1c827e6","event","target","nodeName","targetPageText","textContent","isNaN","Number","$c848cac843f338cf$var$currentPage","$c848cac843f338cf$var$totalPages","$c848cac843f338cf$var$paginationRef","document","querySelector","addEventListener","targetPage","$c848cac843f338cf$var$updateGallery","data","results","total_pages","genres","$c848cac843f338cf$var$initGallery","el","scrolling","show","this","classList","contains","remove","add","window","setTimeout","hide","scrollY","documentElement","scrollTop","onclick","scrollTo","top","left","behavior"],"version":3,"file":"index.2391ca55.js.map"}