var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);var a=o("7me8F");let i,r,s,c,d=9,l=1;function u(e,t,n){s=n,l=e,r=t,i=function(e,t){const n=[];let o,a;const i=Math.floor(d/2);e<1?e=1:e>t&&(e=t);t<=d?(o=1,a=t):e<=i?(o=1,a=d):e+i>=t?(o=t-2*i,a=t):(o=e-i,a=e+i);for(let e=o;e<=a;e+=1)n.push(e);d>=9&&(n.splice(0,1,1),n.splice(n.length-1,1,t),e-1>i&&t>d&&n.splice(1,1," ..."),e+1+i<t&&t>d&&n.splice(n.length-2,1,"... "));return n}(l,r),function(e,t){let n=e.reduce(((e,t)=>e+`<button type="button" ${t===l?'class="pagination-button pagination-button-current"':'class="pagination-button"'}>${t}</button>`),"");r>d&&(1!==l&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),l!==r&&(n+='<button type="button" class="pagination-button">&gt;</button>'));t.innerHTML="",t.insertAdjacentHTML("beforeend",n)}(i,s)}function f(e){const t=e.target.textContent;return isNaN(Number(t))||(c=Number(t)),">"===t&&(c=l===r?r:l+1),"<"===t&&(c=1===l?1:l-1)," ..."===t&&(c=l-(d-4)),"... "===t&&(c=l+(d-4)),l=c,l}window.addEventListener("resize",(()=>{const e=window.matchMedia("(min-width: 768px)").matches;d=e?9:5,u(l,r,s)}));var g=o("fA0uA"),m=o("7TcCz"),h=o("04jNI"),p=o("b5rV1"),w=o("9AkgD");const y=document.querySelector(".dropdown"),b=document.querySelector(".items");y.addEventListener("click",(function(e){e.preventDefault(),y.classList.toggle("active")})),function(){w.dataGenres.genres.unshift({id:"all",name:"ALL"});const e=w.dataGenres.genres.map(((e,t)=>`<a href="#" style="--i:${t+1}" id="${e.id}">\n           <span></span>${e.name}\n         </a>`)).join("");b.insertAdjacentHTML("beforeend",e)}();m=o("7TcCz");const v=new(0,p.LocalStorage)("currentFilmsList"),L=new(0,h.default)({selector:".loading"}),S=document.querySelector(".home-gallery"),q=document.querySelector(".pagination"),F=document.querySelector("#input-toggle"),T=document.querySelector(".search-form"),x=document.querySelector(".error-text");let N,A,k;q.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;L.show();const t=f(e);if(t===j)return;j=t,await $(),L.hide()})),F.addEventListener("change",(async function(e){_=e.currentTarget.checked,z=!1,G=!1,j=1,await $()})),b.addEventListener("click",(async function(e){e.preventDefault(),z=!0,G=!1,C=e.target.id,j=1,await $()})),T.addEventListener("submit",(async function(e){if(e.preventDefault(),E=e.target.elements.searchQuery.value.trim(),T.reset(),!E)return void B();G=!0,z=!1,M=j,j=1,await $()}));let C,E="",M=1,j=1,D=1,_=!1,z=!1,G=!1;async function $(){L.show(),await async function(){if(G){const e=await(0,a.fetchQuery)(E,j);if(!e.results.length)return j=M,L.hide(),void B();N=e}else N=z?await(0,a.fetchMoivesByGenre)(C,j):_?await(0,a.fetchPopularDay)(j):await(0,a.fetchPopular)(j)}(),D=z?300:N.total_pages,k=N.results,v.setLocalStorage(k),(0,g.markupTrending)(k,S),u(j,D,q),L.hide(),window.scrollTo(0,0)}function B(){x.style.opacity="1",setTimeout((()=>{x.style.opacity="0"}),2e3)}x.style.opacity="0",async function(){L.show(),N=await(0,a.fetchGenre)(),A=N.genres,p.genresFilm.setLocalStorage(A),await $(),(0,m.default)(),window.scrollTo(0,0),L.hide()}(),o("2ix2C"),o("b5rV1");p=o("b5rV1");var I=o("iQIUW");g=o("fA0uA");const O={width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3};S.addEventListener("click",(function(e){const t=e.target.closest(".movies-images__item");if(!t)return;R=Number(t.dataset.id),H=v.getLocalStorage();const n=H.find((e=>e.id===R)),o=(0,g.getGenreByIdList)(n.genre_ids);U=p.watchedFilms.getLocalStorage(),P=!!U.length&&U.find((e=>e.id==R)),V=p.queueFilms.getLocalStorage(),W=!!V.length&&V.find((e=>e.id==R)),(0,g.createMarkupModalWindow)(n,o,P,W)}));document.querySelector(".js-filmInfoModal").addEventListener("click",(function(e){const t=e.target;Q=H.filter((e=>e.id==R)),(t.classList.contains("js-add-to-watched")||t.classList.contains("js-add-to-queue"))&&(t.classList.contains("js-add-to-watched")?P?(p.watchedFilms.deleteFilmFromStorage(Q[0]),e.target.textContent="add to watched",I.Notify.success("The movie is deleted from to my library",O),P=!1):(p.watchedFilms.addFilmtoStorage(...Q),e.target.textContent="remove from watched",I.Notify.success("The movie has been added to my library",O),P=!0):t.classList.contains("js-add-to-queue")&&(W?(p.queueFilms.deleteFilmFromStorage(Q[0]),e.target.textContent="add to queue",I.Notify.success("The movie is deleted from queue",O),W=!1):(p.queueFilms.addFilmtoStorage(...Q),e.target.textContent="remove from queue",I.Notify.success("The movie has been added to queue",O),W=!0)))}));let U,V,H,Q,R,P=!1,W=!1;!function(){p.watchedFilms.getLocalStorage()||p.watchedFilms.setLocalStorage();p.queueFilms.getLocalStorage()||p.queueFilms.setLocalStorage()}(),o("fA0uA"),o("6gB84"),o("7TcCz"),o("37v9V"),o("6lsda"),o("9AkgD");
//# sourceMappingURL=index.00291af3.js.map
