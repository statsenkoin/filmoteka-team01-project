{"mappings":"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","sources":["src/js/filmoteka.js","src/js/custom-pagination.js","src/js/genres-btn.js","src/js/spinner.js","src/js/btn-up.js","src/js/modal-teams.js","src/js/library.js"],"sourcesContent":["import {\n  fetchPopular,\n  fetchPopularDay,\n  fetchGenre,\n  fetchMoivesByGenre,\n  fetchQuery,\n} from './api-service';\nimport { updatePagination, getCurrentPage } from './custom-pagination';\nimport {\n  markupTrending,\n  getGenreByIdList,\n  createMarkupModalWindow,\n} from './markups';\nimport modalActions from './modal-servise';\nimport LoadSpinner from './spinner';\nimport { genresFilm, LocalStorage } from './local-storage';\nimport { items } from './genres-btn';\n\nexport const popularFilms = new LocalStorage('currentFilmsList');\nconst loadSpinner = new LoadSpinner({\n  selector: '.loading',\n});\n\nconst homeGallery = document.querySelector('.home-gallery');\nconst paginationRef = document.querySelector('.pagination');\nconst toggle = document.querySelector('#input-toggle');\nconst searchForm = document.querySelector('.search-form');\nconst errorMessage = document.querySelector('.error-text');\n\nhomeGallery.addEventListener('click', onCardClick);\npaginationRef.addEventListener('click', onPaginationButtonClick);\ntoggle.addEventListener('change', onCheckBox);\nitems.addEventListener('click', onGanreClick);\nsearchForm.addEventListener('submit', onSearchForm);\n\nlet receivedFilmList;\nlet currentGenres;\nlet currentFilmsList;\nlet searchQuery = '';\nlet tempPage = 1;\nlet currentPage = 1;\nlet totalPages = 1;\nlet genreId;\nlet isTodayChecked = false;\nlet isGenreChoosen = false;\nlet isSearchChoosen = false;\nerrorMessage.style.opacity = '0';\n\ninitGallery();\n\nasync function initGallery() {\n  loadSpinner.show();\n  receivedFilmList = await fetchGenre();\n  currentGenres = receivedFilmList.genres;\n  genresFilm.setLocalStorage(currentGenres);\n  await updateGallery();\n  loadSpinner.hide();\n}\n\nasync function updateGallery() {\n  loadSpinner.show();\n  await chooseSearchQuery();\n  // ======================================================\n  totalPages = isGenreChoosen ? 300 : receivedFilmList.total_pages;\n  // ======================================================\n  currentFilmsList = receivedFilmList.results;\n  popularFilms.setLocalStorage(currentFilmsList);\n  markupTrending(currentFilmsList, homeGallery);\n  updatePagination(currentPage, totalPages, paginationRef);\n  loadSpinner.hide();\n}\n\nasync function chooseSearchQuery() {\n  if (isSearchChoosen) {\n    const searchFilmList = await fetchQuery(searchQuery, currentPage);\n    if (!searchFilmList.results.length) {\n      currentPage = tempPage;\n      loadSpinner.hide();\n      warningMessage();\n      return;\n    }\n    receivedFilmList = searchFilmList;\n  } else if (isGenreChoosen) {\n    receivedFilmList = await fetchMoivesByGenre(genreId, currentPage);\n  } else {\n    receivedFilmList = isTodayChecked\n      ? await fetchPopularDay(currentPage)\n      : await fetchPopular(currentPage);\n  }\n}\n\nfunction onCardClick(event) {\n  const filmBox = event.target.closest('.movies-images__item');\n  if (!filmBox) return;\n  const filmBoxId = Number(filmBox.dataset.id);\n  const data = currentFilmsList.find(film => film.id === filmBoxId);\n  const filmGenres = getGenreByIdList(data.genre_ids);\n  modalActions(event);\n  createMarkupModalWindow(data, filmGenres);\n}\n\n// ===== button genres ===============================\nasync function onGanreClick(evt) {\n  evt.preventDefault();\n  isGenreChoosen = true;\n  isSearchChoosen = false;\n  genreId = evt.target.id;\n  currentPage = 1;\n  await updateGallery();\n}\n\n// ===== checkBox week/today ========================\nasync function onCheckBox(event) {\n  isTodayChecked = event.currentTarget.checked;\n  isGenreChoosen = false;\n  isSearchChoosen = false;\n  currentPage = 1;\n  await updateGallery();\n}\n\n// ===== search input =================================\nasync function onSearchForm(evt) {\n  evt.preventDefault();\n  searchQuery = evt.target.elements.searchQuery.value.trim();\n  searchForm.reset();\n  if (!searchQuery) {\n    warningMessage();\n    return;\n  }\n  isSearchChoosen = true;\n  isGenreChoosen = false;\n  tempPage = currentPage;\n  currentPage = 1;\n  await updateGallery();\n}\nfunction warningMessage() {\n  errorMessage.style.opacity = '1';\n  timeoutRemoveErrorMessage();\n}\nfunction timeoutRemoveErrorMessage() {\n  setTimeout(() => {\n    errorMessage.style.opacity = '0';\n  }, 2000);\n}\n\n// ===== pagination =====================================\nasync function onPaginationButtonClick(event) {\n  if (event.target.nodeName !== 'BUTTON') return;\n  loadSpinner.show();\n  const targetPage = getCurrentPage(event);\n  if (targetPage === currentPage) return;\n  currentPage = targetPage;\n  await updateGallery();\n  window.scrollTo(0, 0);\n  loadSpinner.hide();\n}\n","// https://jasonwatmore.com/post/2018/08/07/javascript-pure-pagination-logic-in-vanilla-js-typescript\n\nlet maxPages = 9; //maximum number of page navigation links to display\nlet output;\nlet currentPage = 1;\nlet totalPages;\nlet paginationElem;\n\nlet targetPage;\n\n/**\n * to export - marking up pagination line\n * @param {Number} page - the current active page\n * @param {Number} pages - the total number of pages\n * @param {DOM element} paginationRef - where to put pagination line\n */\nexport function updatePagination(page, pages, paginationRef) {\n  paginationElem = paginationRef;\n  currentPage = page;\n  totalPages = pages;\n  output = paginate(currentPage, totalPages);\n  markupPagination(output, paginationElem);\n}\n\n/**\n *\n * @param {event} event click on button element\n * @returns currentPage\n */\nexport function getCurrentPage(event) {\n  const targetPageText = event.target.textContent;\n\n  if (!isNaN(Number(targetPageText))) targetPage = Number(targetPageText);\n  if (targetPageText === '>') {\n    targetPage = currentPage === totalPages ? totalPages : currentPage + 1;\n  }\n  if (targetPageText === '<') {\n    targetPage = currentPage === 1 ? 1 : currentPage - 1;\n  }\n  if (targetPageText === ' ...') targetPage = currentPage - (maxPages - 4);\n  if (targetPageText === '... ') targetPage = currentPage + (maxPages - 4);\n  currentPage = targetPage;\n  return currentPage;\n}\n\n/**\n *\n * @param {Number} currentPage - the current active page\n * @param {Number} totalPages - the total number of pages\n * @returns {Array} of text content for buttons in pagination line\n */\nfunction paginate(currentPage, totalPages) {\n  const output = [];\n  let startPage;\n  let endPage;\n  const offsetPages = Math.floor(maxPages / 2);\n\n  if (currentPage < 1) {\n    currentPage = 1;\n  } else if (currentPage > totalPages) {\n    currentPage = totalPages;\n  }\n\n  if (totalPages <= maxPages) {\n    startPage = 1;\n    endPage = totalPages;\n  } else {\n    if (currentPage <= offsetPages) {\n      startPage = 1;\n      endPage = maxPages;\n    } else if (currentPage + offsetPages >= totalPages) {\n      startPage = totalPages - offsetPages * 2;\n      endPage = totalPages;\n    } else {\n      startPage = currentPage - offsetPages;\n      endPage = currentPage + offsetPages;\n    }\n  }\n  for (let i = startPage; i <= endPage; i += 1) {\n    output.push(i);\n  }\n\n  if (maxPages >= 9) {\n    output.splice(0, 1, 1);\n    output.splice(output.length - 1, 1, totalPages);\n    if (currentPage - 1 > offsetPages && totalPages > maxPages) {\n      output.splice(1, 1, ' ...');\n    }\n    if (currentPage + 1 + offsetPages < totalPages && totalPages > maxPages)\n      output.splice(output.length - 2, 1, '... ');\n  }\n  return output;\n}\n\n/**\n * marking up pagination line\n * @param {Array} output - text content for buttons in pagination line output\n * @param {DOM element} paginationElem - where to put pagination line\n */\nfunction markupPagination(output, paginationElem) {\n  let markup = output.reduce((acc, item) => {\n    const pagiClass =\n      item === currentPage\n        ? 'class=\"pagination-button pagination-button-current\"'\n        : 'class=\"pagination-button\"';\n    return (acc += `<button type=\"button\" ${pagiClass}>${item}</button>`);\n  }, ``);\n  if (totalPages > maxPages) {\n    if (currentPage !== 1) {\n      markup =\n        `<button type=\"button\" class=\"pagination-button\">&lt;</button>` +\n        markup;\n    }\n    if (currentPage !== totalPages) {\n      markup += `<button type=\"button\" class=\"pagination-button\">&gt;</button>`;\n    }\n  }\n\n  paginationElem.innerHTML = '';\n  paginationElem.insertAdjacentHTML('beforeend', markup);\n}\n\nwindow.addEventListener('resize', () => {\n  const isMatch = window.matchMedia('(min-width: 768px)').matches;\n  maxPages = isMatch ? 9 : 5;\n  updatePagination(currentPage, totalPages, paginationElem);\n});\n","import { dataGenres } from './test';\n// import { fetchMoivesByGenre } from './api-service';\n// import { markupTrending } from './markups';\n\nconst dropdown = document.querySelector('.dropdown');\nconst items = document.querySelector('.items');\n// const homeGallery = document.querySelector('.home-gallery');\n\n// =====================================\nexport { items };\n// =====================================\ndropdown.addEventListener('click', onButtonClick);\nfunction btnGenres() {\n  const liArr = dataGenres.genres\n    .map(\n      (element, index) =>\n        `<a href=\"#\" style=\"--i:${index + 1}\" id=\"${element.id}\">\n           <span></span>${element.name}\n         </a>`\n    )\n    .join('');\n\n  items.insertAdjacentHTML('beforeend', liArr);\n}\n\n// items.addEventListener('click', onGanreClick);\nbtnGenres();\n\nfunction onButtonClick(evt) {\n  evt.preventDefault();\n  dropdown.classList.toggle('active');\n}\n\n// async function onGanreClick(evt) {\n//   evt.preventDefault();\n\n//   const arrMovies = await fetchMoivesByGenre(evt.target.id, 1);\n//   markupTrending(arrMovies.results, homeGallery);\n// }\n","export default class LoadSpinner {\n    constructor ({selector, hidden = true}) {\n        this.refs = this.getRefs(selector);\n        hidden && this.hide();\n    }\n    getRefs(selector) {\n        const refs = {};\n        refs.spinner = document.querySelector(selector);\n        return refs;\n    }\n\n    show() {\n        this.refs.spinner.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.spinner.classList.add('is-hidden');\n    }\n}\n\n\n// import LoadSpinner from './spinner';\n// const loadSpinner = new LoadSpinner({selector: '.loading',});\n\n// loadSpinner.show();\n// loadSpinner.hide();","export const btnUp = {\n  el: document.querySelector('.btn-up'),\n  scrolling: false,\n  show() {\n    if (this.el.classList.contains('btn-up_hide') && !this.el.classList.contains('btn-up_hiding')) {\n      this.el.classList.remove('btn-up_hide');\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.remove('btn-up_hiding');\n      }, 300);\n    }\n  },\n  hide() {\n    if (\n      !this.el.classList.contains('btn-up_hide') &&\n      !this.el.classList.contains('btn-up_hiding')\n    ) {\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.add('btn-up_hide');\n        this.el.classList.remove('btn-up_hiding');\n      }, 300);\n    }\n  },\n  addEventListener() {\n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY || document.documentElement.scrollTop;\n      if (this.scrolling && scrollY > 0) {\n        return;\n      }\n      this.scrolling = false;\n\n      if (scrollY > 400) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    });\n\n    document.querySelector('.btn-up').onclick = () => {\n      this.scrolling = true;\n      this.hide();\n\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    };\n  },\n};\n\nbtnUp.addEventListener();\n","const studentsRef = document.querySelector('.footer__link');\nconst line1Ref = document.querySelector('.line1');\nconst line11Ref = document.querySelector('.line11');\nconst line12Ref = document.querySelector('.line12');\nconst line13Ref = document.querySelector('.line13');\nconst line2Ref = document.querySelector('.line2');\nconst line21Ref = document.querySelector('.line21');\nconst line3Ref = document.querySelector('.line3');\nconst teamsDesk = document.querySelector('.teams_desk');\nconst fonTeams = document.querySelector('.fon');\n\n\nconst p1Ref = document.querySelector('#p1');\nconst p2Ref = document.querySelector('#p2');\nconst p3Ref = document.querySelector('#p3');\nconst p4Ref = document.querySelector('#p4');\nconst p5Ref = document.querySelector('#p5');\nconst p6Ref = document.querySelector('#p6');\nconst p7Ref = document.querySelector('#p7');\nconst p8Ref = document.querySelector('#p8');\nconst p9Ref = document.querySelector('#p9');\nconst p10Ref = document.querySelector('#p10');\nconst p11Ref = document.querySelector('#p11');\n\nstudentsRef.addEventListener('click', slider);\n\nline1Ref.addEventListener('click', showPerson)\nline11Ref.addEventListener('click', showPerson);\nline12Ref.addEventListener('click', showPerson);\nline13Ref.addEventListener('click', showPerson);\nline2Ref.addEventListener('click', showPerson);\nline21Ref.addEventListener('click', showPerson);\nline3Ref.addEventListener('click', showPerson);\nfonTeams.addEventListener('click', close);\n\nfunction slider(e) {\n    e.preventDefault();\n    if (document.defaultView.innerWidth < 768) {\n        line1Ref.classList.add('line_active');\n        line11Ref.classList.add('line_active');\n        line12Ref.classList.add('line_active');\n        line13Ref.classList.add('line_active');\n        line2Ref.classList.add('line_active');\n        line21Ref.classList.add('line_active');\n        line3Ref.classList.add('line_active');\n    }\n\n    if (document.defaultView.innerWidth < 1280) {\n        line2Ref.classList.add('line_active');\n        line21Ref.classList.add('line_active');\n    }\n\n    if (document.defaultView.innerWidth > 1280) {\n        line3Ref.classList.add('line_active')\n    }\n\n    fonTeams.classList.add('fon_active');\n}\n\nfunction showPerson(e) {\n    e.preventDefault();\n    removePerson();\n    line1Ref.classList.remove('line_active');\n    line11Ref.classList.remove('line_active');\n    line12Ref.classList.remove('line_active');\n    line13Ref.classList.remove('line_active');\n    line2Ref.classList.remove('line_active');\n    line21Ref.classList.remove('line_active');\n    line3Ref.classList.remove('line_active');\n    addPerson(e);\n}\n\nfunction close(e) {\n    removePerson();\n    fonTeams.classList.remove('fon_active');\n    line1Ref.classList.remove('line_active');\n    line11Ref.classList.remove('line_active');\n    line12Ref.classList.remove('line_active');\n    line13Ref.classList.remove('line_active');\n    line2Ref.classList.remove('line_active');\n    line21Ref.classList.remove('line_active');\n    line3Ref.classList.remove('line_active');\n\n}\n\nfunction addPerson(e) {\n  if (e.target.getAttribute('id') === 't1')\n    p1Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't2')\n    p2Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't3')\n    p3Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't4')\n    p4Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't5')\n    p5Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't6')\n    p6Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't7')\n    p7Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't8')\n    p8Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't9')\n    p9Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't10')\n    p10Ref.classList.add('teams_desk_active');\n  if (e.target.getAttribute('id') === 't11')\n    p11Ref.classList.add('teams_desk_active');\n}\n\nfunction removePerson() {\n  p1Ref.classList.remove('teams_desk_active');\n  p2Ref.classList.remove('teams_desk_active');\n  p3Ref.classList.remove('teams_desk_active');\n  p4Ref.classList.remove('teams_desk_active');\n  p5Ref.classList.remove('teams_desk_active');\n  p6Ref.classList.remove('teams_desk_active');\n  p7Ref.classList.remove('teams_desk_active');\n  p8Ref.classList.remove('teams_desk_active');\n  p9Ref.classList.remove('teams_desk_active');\n  p10Ref.classList.remove('teams_desk_active');\n  p11Ref.classList.remove('teams_desk_active');\n}\n\nconsole.dir(document.defaultView.innerWidth);","import { watchedFilms, queueFilms } from './local-storage';\nimport { popularFilms } from './filmoteka';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n//options for notiflix\nconst options = {\n  width: '280px',\n  borderRadius: '30px',\n  position: 'center-bottom',\n  distance: '25px',\n  fontSize: '18px',\n  timeout: 2000,\n};\n\nconst overlay = document.querySelector('.js-filmInfoModal');\n\noverlay.addEventListener('click', onWathedBtn);\nlet filmCollection = null;\n\nfunction onWathedBtn(event) {\n  const element = event.target;\n\n  if (\n    element.classList.contains('js-add-to-watched') ||\n    element.classList.contains('js-add-to-queue')\n  ) {\n    filmCollection = popularFilms.getLocalStorage();\n\n    const idFilm = overlay.lastElementChild.lastElementChild.id;\n\n    const currentFilm = filmCollection.filter(film => film.id == idFilm);\n\n    if (element.classList.contains('js-add-to-watched')) {\n      if (!watchedFilms.getLocalStorage()) {\n        watchedFilms.setLocalStorage();\n      }\n      const response = watchedFilms.getLocalStorage();\n      const filmIncludes = response.filter(item => item.id == idFilm);\n\n      if (filmIncludes.length) {\n        Notify.warning('The movie has already been added to my library', options);\n      } else {\n        watchedFilms.addFilmtoStorage(...currentFilm);\n        Notify.success('The movie has been added to my library', options);\n      }\n    } else if (element.classList.contains('js-add-to-queue')) {\n      if (!queueFilms.getLocalStorage()) {\n        queueFilms.setLocalStorage();\n      }\n      const response = queueFilms.getLocalStorage();\n\n      const filmIncludes = response.filter(item => item.id == idFilm);\n\n      if (filmIncludes.length) {\n        Notify.warning('The movie has already been added to my library', options);\n      } else {\n        queueFilms.addFilmtoStorage(...currentFilm);\n        Notify.success('The movie has been added to my library', options);\n      }\n    }\n    element.disabled = 'true';\n    element.style.background = '#FF7F50';\n  }\n}\n"],"names":["$7me8F","parcelRequire","$b7da7886b6ae1331$var$output","$b7da7886b6ae1331$var$totalPages","$b7da7886b6ae1331$var$paginationElem","$b7da7886b6ae1331$var$targetPage","$b7da7886b6ae1331$var$maxPages","$b7da7886b6ae1331$var$currentPage","$b7da7886b6ae1331$export$909ec5aabce1b1f7","page","pages","paginationRef","currentPage1","totalPages1","output1","startPage","endPage","offsetPages","Math","floor","i","push","splice","length","$b7da7886b6ae1331$var$paginate","output2","paginationElem1","markup","reduce","acc","item","innerHTML","insertAdjacentHTML","$b7da7886b6ae1331$var$markupPagination","$b7da7886b6ae1331$export$7945ba8eb1c827e6","event","targetPageText","target","textContent","isNaN","Number","window","addEventListener","isMatch","matchMedia","matches","$9AkgD","$e3f44edcaeb43caa$var$dropdown","document","querySelector","$e3f44edcaeb43caa$export$17a1664ed1fb5d6f","evt","preventDefault","classList","toggle","liArr","dataGenres","genres","map","element","index","id","name","join","$e3f44edcaeb43caa$var$btnGenres","$c848cac843f338cf$export$882ffcee72083d19","$b5rV1","LocalStorage","$c848cac843f338cf$var$loadSpinner","getRefs","selector","refs","spinner","show","this","remove","hide","add","constructor","hidden","$c848cac843f338cf$var$homeGallery","$c848cac843f338cf$var$paginationRef","$c848cac843f338cf$var$toggle","$c848cac843f338cf$var$searchForm","$c848cac843f338cf$var$errorMessage","$c848cac843f338cf$var$receivedFilmList","$c848cac843f338cf$var$currentGenres","$c848cac843f338cf$var$currentFilmsList","filmBox","closest","filmBoxId","dataset","data","find","film","filmGenres","$fA0uA","getGenreByIdList","genre_ids","$7TcCz","default","createMarkupModalWindow","async","nodeName","targetPage","$c848cac843f338cf$var$currentPage","$c848cac843f338cf$var$updateGallery","scrollTo","$c848cac843f338cf$var$isTodayChecked","currentTarget","checked","$c848cac843f338cf$var$isGenreChoosen","$c848cac843f338cf$var$isSearchChoosen","$c848cac843f338cf$var$genreId","$c848cac843f338cf$var$searchQuery","elements","searchQuery","value","trim","reset","$c848cac843f338cf$var$warningMessage","$c848cac843f338cf$var$tempPage","$c848cac843f338cf$var$totalPages","searchFilmList","fetchQuery","results","fetchMoivesByGenre","fetchPopularDay","fetchPopular","$c848cac843f338cf$var$chooseSearchQuery","total_pages","setLocalStorage","markupTrending","style","opacity","setTimeout","fetchGenre","genresFilm","$c848cac843f338cf$var$initGallery","el","scrolling","contains","scrollY","documentElement","scrollTop","onclick","top","left","behavior","$49ea96725749d306$var$studentsRef","$49ea96725749d306$var$line1Ref","$49ea96725749d306$var$line11Ref","$49ea96725749d306$var$line12Ref","$49ea96725749d306$var$line13Ref","$49ea96725749d306$var$line2Ref","$49ea96725749d306$var$line21Ref","$49ea96725749d306$var$line3Ref","$49ea96725749d306$var$fonTeams","$49ea96725749d306$var$p1Ref","$49ea96725749d306$var$p2Ref","$49ea96725749d306$var$p3Ref","$49ea96725749d306$var$p4Ref","$49ea96725749d306$var$p5Ref","$49ea96725749d306$var$p6Ref","$49ea96725749d306$var$p7Ref","$49ea96725749d306$var$p8Ref","$49ea96725749d306$var$p9Ref","$49ea96725749d306$var$p10Ref","$49ea96725749d306$var$p11Ref","$49ea96725749d306$var$showPerson","e","$49ea96725749d306$var$removePerson","getAttribute","$49ea96725749d306$var$addPerson","defaultView","innerWidth","console","dir","$1cafa503bc57b7a0$var$options","width","borderRadius","position","distance","fontSize","timeout","$1cafa503bc57b7a0$var$overlay","$1cafa503bc57b7a0$var$filmCollection","getLocalStorage","idFilm","lastElementChild","currentFilm","filter","watchedFilms","response","$iQIUW","Notify","warning","addFilmtoStorage","success","queueFilms","disabled","background"],"version":3,"file":"index.4fe2750c.js.map"}