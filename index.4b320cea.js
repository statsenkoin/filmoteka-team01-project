var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);var a=o("7me8F");let i,r,s,c,d=9,l=1;function u(e,t,n){s=n,l=e,r=t,i=function(e,t){const n=[];let o,a;const i=Math.floor(d/2);e<1?e=1:e>t&&(e=t);t<=d?(o=1,a=t):e<=i?(o=1,a=d):e+i>=t?(o=t-2*i,a=t):(o=e-i,a=e+i);for(let e=o;e<=a;e+=1)n.push(e);d>=9&&(n.splice(0,1,1),n.splice(n.length-1,1,t),e-1>i&&t>d&&n.splice(1,1," ..."),e+1+i<t&&t>d&&n.splice(n.length-2,1,"... "));return n}(l,r),function(e,t){let n=e.reduce(((e,t)=>e+`<button type="button" ${t===l?'class="pagination-button pagination-button-current"':'class="pagination-button"'}>${t}</button>`),"");r>d&&(1!==l&&(n='<button type="button" class="pagination-button">&lt;</button>'+n),l!==r&&(n+='<button type="button" class="pagination-button">&gt;</button>'));t.innerHTML="",t.insertAdjacentHTML("beforeend",n)}(i,s)}function f(e){const t=e.target.textContent;return isNaN(Number(t))||(c=Number(t)),">"===t&&(c=l===r?r:l+1),"<"===t&&(c=1===l?1:l-1)," ..."===t&&(c=l-(d-4)),"... "===t&&(c=l+(d-4)),l=c,l}window.addEventListener("resize",(()=>{const e=window.matchMedia("(min-width: 768px)").matches;d=e?9:5,u(l,r,s)}));var g=o("fA0uA"),m=(o("7TcCz"),o("04jNI")),h=o("b5rV1"),p=o("9AkgD");const w=document.querySelector(".dropdown"),y=document.querySelector(".items");w.addEventListener("click",(function(e){e.preventDefault(),w.classList.toggle("active")})),function(){p.dataGenres.genres.unshift({id:"all",name:"ALL"});const e=p.dataGenres.genres.map(((e,t)=>`<a href="#" style="--i:${t+1}" id="${e.id}">\n           <span></span>${e.name}\n         </a>`)).join("");y.insertAdjacentHTML("beforeend",e)}(),(0,o("7TcCz").default)();const b=new(0,h.LocalStorage)("currentFilmsList"),v=new(0,m.default)({selector:".loading"}),L=document.querySelector(".home-gallery"),S=document.querySelector(".pagination"),q=document.querySelector("#input-toggle"),F=document.querySelector(".search-form"),T=document.querySelector(".error-text");let x,N,A;S.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;v.show();const t=f(e);if(t===M)return;M=t,await G(),v.hide()})),q.addEventListener("change",(async function(e){D=e.currentTarget.checked,_=!1,z=!1,M=1,await G()})),y.addEventListener("click",(async function(e){e.preventDefault(),_=!0,z=!1,k=e.target.id,M=1,await G()})),F.addEventListener("submit",(async function(e){if(e.preventDefault(),C=e.target.elements.searchQuery.value.trim(),F.reset(),!C)return void $();z=!0,_=!1,E=M,M=1,await G()}));let k,C="",E=1,M=1,j=1,D=!1,_=!1,z=!1;async function G(){v.show(),await async function(){if(z){const e=await(0,a.fetchQuery)(C,M);if(!e.results.length)return M=E,v.hide(),void $();x=e}else x=_?await(0,a.fetchMoivesByGenre)(k,M):D?await(0,a.fetchPopularDay)(M):await(0,a.fetchPopular)(M)}(),j=_?300:x.total_pages,A=x.results,b.setLocalStorage(A),(0,g.markupTrending)(A,L),u(M,j,S),v.hide(),window.scrollTo(0,0)}function $(){T.style.opacity="1",setTimeout((()=>{T.style.opacity="0"}),2e3)}T.style.opacity="0",async function(){v.show(),x=await(0,a.fetchGenre)(),N=x.genres,h.genresFilm.setLocalStorage(N),await G(),v.hide()}(),window.scrollTo(0,0),o("b5rV1"),o("6gB84"),o("7TcCz"),o("6lsda"),o("9AkgD"),o("fA0uA");h=o("b5rV1");var B=o("iQIUW");g=o("fA0uA");const I={width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3};L.addEventListener("click",(function(e){const t=e.target.closest(".movies-images__item");if(!t)return;Q=Number(t.dataset.id),V=b.getLocalStorage();const n=V.find((e=>e.id===Q)),o=(0,g.getGenreByIdList)(n.genre_ids);O=h.watchedFilms.getLocalStorage(),R=!!O.length&&O.find((e=>e.id==Q)),U=h.queueFilms.getLocalStorage(),P=!!U.length&&U.find((e=>e.id==Q)),(0,g.createMarkupModalWindow)(n,o,R,P)}));document.querySelector(".js-filmInfoModal").addEventListener("click",(function(e){const t=e.target;H=V.filter((e=>e.id==Q)),(t.classList.contains("js-add-to-watched")||t.classList.contains("js-add-to-queue"))&&(t.classList.contains("js-add-to-watched")?R?(h.watchedFilms.deleteFilmFromStorage(H[0]),e.target.textContent="add to watched",B.Notify.success("The movie is deleted from to my library",I),R=!1):(h.watchedFilms.addFilmtoStorage(...H),e.target.textContent="remove from watched",B.Notify.success("The movie has been added to my library",I),R=!0):t.classList.contains("js-add-to-queue")&&(P?(h.queueFilms.deleteFilmFromStorage(H[0]),e.target.textContent="add to queue",B.Notify.success("The movie is deleted from queue",I),P=!1):(h.queueFilms.addFilmtoStorage(...H),e.target.textContent="remove from queue",B.Notify.success("The movie has been added to queue",I),P=!0)))}));let O,U,V,H,Q,R=!1,P=!1;!function(){h.watchedFilms.getLocalStorage()||h.watchedFilms.setLocalStorage();h.queueFilms.getLocalStorage()||h.queueFilms.setLocalStorage()}(),o("37v9V"),o("2ix2C");
//# sourceMappingURL=index.4b320cea.js.map
