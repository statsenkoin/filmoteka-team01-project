!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var i=a("bpxeT"),o=a("2TvXO"),s=a("1h2Gi"),c=a("dAKN3"),u=a("LW3sO"),d=(a("kf3wk"),a("j1lrD")),l=a("4LMMA"),f=a("8FeKp"),p=document.querySelector(".dropdown"),m=document.querySelector(".items");p.addEventListener("click",(function(e){e.preventDefault(),p.classList.toggle("active")})),function(){f.dataGenres.genres.unshift({id:"all",name:"ALL"});var e=f.dataGenres.genres.map((function(e,t){return'<a href="#" style="--i:'.concat(t+1,'" id="').concat(e.id,'">\n           <span></span>').concat(e.name,"\n         </a>")})).join("");m.insertAdjacentHTML("beforeend",e)}(),(0,a("kf3wk").default)();var h,g,y,v=new(0,l.LocalStorage)("currentFilmsList"),w=new(0,d.default)({selector:".loading"}),x=document.querySelector(".home-gallery"),L=document.querySelector(".pagination"),k=document.querySelector("#input-toggle"),b=document.querySelector(".search-form"),S=document.querySelector(".error-text");L.addEventListener("click",(function(e){return Q.apply(this,arguments)})),k.addEventListener("change",(function(e){return P.apply(this,arguments)})),m.addEventListener("click",(function(e){return W.apply(this,arguments)})),b.addEventListener("submit",(function(e){return B.apply(this,arguments)}));var F,q="",T=1,M=1,N=1,E=!1,O=!1,j=!1;function D(){return(D=e(i)(e(o).mark((function t(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.show(),e.next=3,(0,s.fetchGenre)();case 3:return h=e.sent,g=h.genres,l.genresFilm.setLocalStorage(g),e.next=8,_();case 8:w.hide();case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(){return A.apply(this,arguments)}function A(){return(A=e(i)(e(o).mark((function t(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.show(),e.next=3,C();case 3:N=O?300:h.total_pages,y=h.results,v.setLocalStorage(y),(0,u.markupTrending)(y,x),(0,c.updatePagination)(M,N,L),w.hide(),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function C(){return G.apply(this,arguments)}function G(){return(G=e(i)(e(o).mark((function t(){var n;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=12;break}return e.next=3,(0,s.fetchQuery)(q,M);case 3:if((n=e.sent).results.length){e.next=9;break}return M=T,w.hide(),K(),e.abrupt("return");case 9:h=n,e.next=28;break;case 12:if(!O){e.next=18;break}return e.next=15,(0,s.fetchMoivesByGenre)(F,M);case 15:h=e.sent,e.next=28;break;case 18:if(!E){e.next=24;break}return e.next=21,(0,s.fetchPopularDay)(M);case 21:e.t0=e.sent,e.next=27;break;case 24:return e.next=26,(0,s.fetchPopular)(M);case 26:e.t0=e.sent;case 27:h=e.t0;case 28:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function W(){return(W=e(i)(e(o).mark((function t(n){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),O=!0,j=!1,F=n.target.id,M=1,e.next=7,_();case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=e(i)(e(o).mark((function t(n){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E=n.currentTarget.checked,O=!1,j=!1,M=1,e.next=6,_();case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function B(){return(B=e(i)(e(o).mark((function t(n){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),q=n.target.elements.searchQuery.value.trim(),b.reset(),q){e.next=6;break}return K(),e.abrupt("return");case 6:return j=!0,O=!1,T=M,M=1,e.next=12,_();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function K(){S.style.opacity="1",setTimeout((function(){S.style.opacity="0"}),2e3)}function Q(){return(Q=e(i)(e(o).mark((function t(n){var r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:if(w.show(),(r=(0,c.getCurrentPage)(n))!==M){e.next=6;break}return e.abrupt("return");case 6:return M=r,e.next=9,_();case 9:w.hide();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}S.style.opacity="0",function(){D.apply(this,arguments)}(),window.scrollTo(0,0),a("4LMMA"),a("475fx"),a("kf3wk"),a("kLpTw"),a("8FeKp"),a("LW3sO");var R=a("8nrFW"),U=(l=a("4LMMA"),a("h6c0i")),I=(u=a("LW3sO"),{width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3});x.addEventListener("click",(function(e){var t=e.target.closest(".movies-images__item");if(!t)return;V=Number(t.dataset.id);var n=(H=v.getLocalStorage()).find((function(e){return e.id===V})),r=(0,u.getGenreByIdList)(n.genre_ids);X=l.watchedFilms.getLocalStorage(),Y=!!X.length&&X.find((function(e){return e.id==V})),z=l.queueFilms.getLocalStorage(),Z=!!z.length&&z.find((function(e){return e.id==V})),(0,u.createMarkupModalWindow)(n,r,Y,Z)})),document.querySelector(".js-filmInfoModal").addEventListener("click",(function(t){var n=t.target;if(J=H.filter((function(e){return e.id==V})),n.classList.contains("js-add-to-watched")||n.classList.contains("js-add-to-queue")){var r;if(n.classList.contains("js-add-to-watched"))if(Y)l.watchedFilms.deleteFilmFromStorage(J[0]),t.target.textContent="add to watched",U.Notify.success("The movie is deleted from to my library",I),Y=!1;else(r=l.watchedFilms).addFilmtoStorage.apply(r,e(R)(J)),t.target.textContent="remove from watched",U.Notify.success("The movie has been added to my library",I),Y=!0;else if(n.classList.contains("js-add-to-queue")){var a;if(Z)l.queueFilms.deleteFilmFromStorage(J[0]),t.target.textContent="add to queue",U.Notify.success("The movie is deleted from queue",I),Z=!1;else(a=l.queueFilms).addFilmtoStorage.apply(a,e(R)(J)),t.target.textContent="remove from queue",U.Notify.success("The movie has been added to queue",I),Z=!0}}}));var X,z,H,J,V,Y=!1,Z=!1;!function(){l.watchedFilms.getLocalStorage()||l.watchedFilms.setLocalStorage();l.queueFilms.getLocalStorage()||l.queueFilms.setLocalStorage()}(),a("cDXQO"),a("iNWLi")}();
//# sourceMappingURL=index.8af3139a.js.map
