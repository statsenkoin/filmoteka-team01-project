var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n);var a=n("7me8F"),i=n("fME8n"),r=n("fA0uA"),s=(n("7TcCz"),n("04jNI")),c=n("b5rV1"),d=n("9AkgD");const l=document.querySelector(".dropdown"),u=document.querySelector(".items");l.addEventListener("click",(function(e){e.preventDefault(),l.classList.toggle("active")})),function(){const e=d.dataGenres.genres.map(((e,t)=>`<a href="#" style="--i:${t+1}" id="${e.id}">\n           <span></span>${e.name}\n         </a>`)).join("");u.insertAdjacentHTML("beforeend",e)}(),(0,n("7TcCz").default)();const f=new(0,c.LocalStorage)("currentFilmsList"),m=new(0,s.default)({selector:".loading"}),g=document.querySelector(".home-gallery"),y=document.querySelector(".pagination"),h=document.querySelector("#input-toggle"),w=document.querySelector(".search-form"),p=document.querySelector(".error-text");document.querySelector("#week-btn"),document.querySelector("#today-btn");let v,L,S;y.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;m.show();const t=(0,i.getCurrentPage)(e);if(t===T)return;T=t,await N(),m.hide()})),h.addEventListener("change",(async function(e){k=e.currentTarget.checked,C=!1,E=!1,T=1,await N()})),u.addEventListener("click",(async function(e){e.preventDefault(),C=!0,E=!1,q=e.target.id,T=1,await N()})),w.addEventListener("submit",(async function(e){if(e.preventDefault(),F=e.target.elements.searchQuery.value.trim(),w.reset(),!F)return void A();E=!0,C=!1,b=T,T=1,await N()}));let q,F="",b=1,T=1,x=1,k=!1,C=!1,E=!1;async function N(){m.show(),await async function(){if(E){const e=await(0,a.fetchQuery)(F,T);if(!e.results.length)return T=b,m.hide(),void A();v=e}else v=C?await(0,a.fetchMoivesByGenre)(q,T):k?await(0,a.fetchPopularDay)(T):await(0,a.fetchPopular)(T)}(),x=C?300:v.total_pages,S=v.results,f.setLocalStorage(S),(0,r.markupTrending)(S,g),(0,i.updatePagination)(T,x,y),m.hide(),window.scrollTo(0,0)}function A(){p.style.opacity="1",setTimeout((()=>{p.style.opacity="0"}),2e3)}p.style.opacity="0",async function(){m.show(),v=await(0,a.fetchGenre)(),L=v.genres,c.genresFilm.setLocalStorage(L),await N(),m.hide()}(),window.scrollTo(0,0),n("b5rV1"),n("6gB84"),n("7TcCz"),n("6lsda"),n("9AkgD"),n("fA0uA");c=n("b5rV1");var j=n("iQIUW");r=n("fA0uA");const D={width:"280px",borderRadius:"30px",position:"center-bottom",distance:"25px",fontSize:"18px",timeout:2e3};g.addEventListener("click",(function(e){const t=e.target.closest(".movies-images__item");if(!t)return;G=Number(t.dataset.id),z=f.getLocalStorage();const o=z.find((e=>e.id===G)),n=(0,r.getGenreByIdList)(o.genre_ids);M=c.watchedFilms.getLocalStorage(),I=!!M.length&&M.find((e=>e.id==G)),_=c.queueFilms.getLocalStorage(),O=!!_.length&&_.find((e=>e.id==G)),(0,r.createMarkupModalWindow)(o,n,I,O)}));document.querySelector(".js-filmInfoModal").addEventListener("click",(function(e){const t=e.target;B=z.filter((e=>e.id==G)),(t.classList.contains("js-add-to-watched")||t.classList.contains("js-add-to-queue"))&&(t.classList.contains("js-add-to-watched")?I?(c.watchedFilms.deleteFilmFromStorage(B[0]),e.target.textContent="add to watched",j.Notify.success("The movie is deleted from to my library",D),I=!1):(c.watchedFilms.addFilmtoStorage(...B),e.target.textContent="remove from watched",j.Notify.success("The movie has been added to my library",D),I=!0):t.classList.contains("js-add-to-queue")&&(O?(c.queueFilms.deleteFilmFromStorage(B[0]),e.target.textContent="add to queue",j.Notify.success("The movie is deleted from queue",D),O=!1):(c.queueFilms.addFilmtoStorage(...B),e.target.textContent="remove from queue",j.Notify.success("The movie has been added to queue",D),O=!0)))}));let M,_,z,B,G,I=!1,O=!1;!function(){c.watchedFilms.getLocalStorage()||c.watchedFilms.setLocalStorage();c.queueFilms.getLocalStorage()||c.queueFilms.setLocalStorage()}(),n("37v9V"),n("2ix2C");
//# sourceMappingURL=index.4a822482.js.map
